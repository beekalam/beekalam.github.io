<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-03-05 Sun 23:56 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>php recipes</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Mohammad Reza Mansouri" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">php recipes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd6e16cb">regular expression</a>
<ul>
<li><a href="#orgf3e7a87">Finding the nth Occurrence of a Match</a></li>
<li><a href="#org1f51b62">replace n counts of a pattern</a></li>
</ul>
</li>
<li><a href="#org27f0a97">strings</a>
<ul>
<li><a href="#org7f5682e">defining heredoc document</a></li>
<li><a href="#org5d87bd4">Accessing Substrings</a></li>
<li><a href="#orgd5dc8d6">Extracting Substrings</a></li>
<li><a href="#orgbfda7af">substring from beginning of the line except the last char</a></li>
<li><a href="#orgf4c4369">Replacing substrings</a></li>
<li><a href="#org25c66d1">Processing a String One Byte at a Time</a></li>
<li><a href="#orgd5f2e8f">Reversing a String by Byte</a></li>
<li><a href="#org07de9f0">Reversing a string by word</a></li>
<li><a href="#orgbded153">Switching tabs and spaces</a></li>
<li><a href="#orge0e7553">trimming space</a></li>
<li><a href="#org5049c85">controlling case</a>
<ul>
<li><a href="#org37f033e">capitalizing letters</a></li>
<li><a href="#org1f39f6f">whole string case control</a></li>
</ul>
</li>
<li><a href="#org62bdecc">ordinal value of character</a></li>
<li><a href="#orgca3b44e">character value of integer</a></li>
<li><a href="#org1b8bcf7">replace multiple</a></li>
<li><a href="#org0b071ee">convert string to array</a></li>
<li><a href="#orga882b78">split a string by char</a></li>
<li><a href="#org1ad8a2a">split a string to chunks of length n</a></li>
<li><a href="#orgc554e03">remove alphabet values from string</a></li>
</ul>
</li>
<li><a href="#orgdb8f5d7">numbers</a>
<ul>
<li><a href="#orgc545cf9">Checking Whether a Variable Contains a Valid Number</a></li>
<li><a href="#org0b9fcf6">comparing floating point numbers</a></li>
<li><a href="#org0a39363">Rounding Floating-Point Numbers</a></li>
<li><a href="#org28db7c6">Converting between bases</a></li>
</ul>
</li>
<li><a href="#orgfe0a047">arrays</a>
<ul>
<li><a href="#orgc40efc0">check for empty array</a></li>
<li><a href="#orgcf9fe6a">sum of items in an array</a></li>
<li><a href="#org2a7081b">Specifying an Array Not Beginning at Element 0</a></li>
<li><a href="#orga2ad772">Storing Multiple Elements Per Key in an Array</a></li>
<li><a href="#org769d71c">Initializing an Array to a Range of Integers</a></li>
<li><a href="#orgd062d08">Iterating through an array</a></li>
<li><a href="#org12cd7ef">Deleting elements from an array</a></li>
<li><a href="#org1f38577">Changing array size</a></li>
<li><a href="#org1368f30">Appending one array to another</a></li>
<li><a href="#orga8a1aee">Turning an Array into a String</a></li>
<li><a href="#org11f772d">Checking if a Key Is in an Array</a></li>
<li><a href="#org2f72e7d">Checking if an Element Is in an Array</a></li>
<li><a href="#org2b75e97">Finding the Position of a Value in an Array</a></li>
<li><a href="#org9391bd4">Finding Elements That Pass a Certain Test</a></li>
<li><a href="#org85b5288">Finding the Largest or Smallest Valued Element in an Array</a></li>
<li><a href="#org1cea9e2">Sorting an Array</a></li>
<li><a href="#orgec07308">Randomizing an Array</a></li>
<li><a href="#org0daa2a6">Removing Duplicate Elements from an Array</a></li>
<li><a href="#orgd39d039">Applying a Function to Each Element in an Array</a></li>
<li><a href="#orgefd7f6d">Finding the Union, Intersection, or Difference of Two Arrays</a></li>
<li><a href="#org07cb094">Making an Object Act like an Array</a></li>
<li><a href="#orgcc4bfe2">array<sub>reduce</sub></a></li>
<li><a href="#org5177cce">create and array from variables and their values</a>
<ul>
<li><a href="#org7e0dd5e">intro</a></li>
<li><a href="#orgf951a2f">using compact for debugging</a></li>
</ul>
</li>
<li><a href="#org1521e69">flatten php array</a></li>
</ul>
</li>
<li><a href="#orgd511018">Date and Time</a>
<ul>
<li><a href="#org06755db">Finding the Current Date and Time</a></li>
<li><a href="#org590fa06">Converting Time and Date Parts to an Epoch Timestamp</a></li>
<li><a href="#org078a542">Converting an Epoch Timestamp to Time and Date Parts</a></li>
<li><a href="#org8b336f8">Finding the Difference of Two Dates</a></li>
<li><a href="#org681848c">date difference using <code>DateInterval</code></a></li>
<li><a href="#org32af68e">number of days between two dates</a></li>
<li><a href="#org0e093bf">convert seconds to time with format HH:MM:SS</a></li>
</ul>
</li>
<li><a href="#org8a24443">variables</a>
<ul>
<li><a href="#org14ba1d9">Establishing a Default Value</a></li>
<li><a href="#org648a3dd">Exchanging Values Without Using Temporary Variables</a></li>
<li><a href="#org3723f1b">Creating a Dynamic Variable Name</a></li>
<li><a href="#orgcebcab6">Using Static Variables</a></li>
<li><a href="#org88c36d5">Encapsulating Complex Data Types in a String</a></li>
</ul>
</li>
<li><a href="#org2335cc0">functions</a>
<ul>
<li><a href="#org328de91">checking for a function's existence</a></li>
<li><a href="#org938cc6c">Creating Functions That Take a Variable Number of Arguments</a></li>
</ul>
</li>
<li><a href="#org899a838">Misc</a>
<ul>
<li><a href="#orgb96f420">get results from eval</a></li>
<li><a href="#org59d9e2a">check if a class has a property</a></li>
<li><a href="#org6f92338">redirecting</a></li>
<li><a href="#org9847af7">making the root path</a></li>
<li><a href="#orgc80ab4f">integer division</a></li>
</ul>
</li>
<li><a href="#orgfbec5b2">json</a>
<ul>
<li><a href="#orge078d2c">json encode raw UTF?</a></li>
</ul>
</li>
<li><a href="#orge22dc73">webservice</a>
<ul>
<li><a href="#org897a489">types of webservices</a>
<ul>
<li><a href="#org4f543f1">SOAP</a></li>
<li><a href="#org7b20449">WSDL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org34d290e">classes</a>
<ul>
<li><a href="#org40be2c5">static attributes or methods.</a></li>
<li><a href="#orgaf591b4">_<sub>clone</sub> magic method</a></li>
<li><a href="#orgd417cc1">passing objects as function parameters.</a></li>
<li><a href="#org01a64ba">Using Magic _<sub>get</sub> and _<sub>set</sub> Methods</a></li>
<li><a href="#orgcb469da">counting objects</a></li>
<li><a href="#orgd8ace90">Using _<sub>call</sub>() and _<sub>callStatic</sub>()</a></li>
<li><a href="#org19eb291">serializing</a></li>
</ul>
</li>
<li><a href="#org066d417">reflection</a>
<ul>
<li><a href="#org851fd45">retrieving the name of current function?</a></li>
</ul>
</li>
<li><a href="#org80eacec">Debug</a>
<ul>
<li><a href="#orgdcea580">dump all variables?</a></li>
<li><a href="#org6b586a0">send an error message to  the web server's error log or to a file.</a></li>
<li><a href="#org61052c4">enabling error reporting</a></li>
</ul>
</li>
<li><a href="#org54063d2">exceptions</a>
<ul>
<li><a href="#orgbd8629a">Throwing Exceptions</a></li>
<li><a href="#orgc2c2710">Extending Exceptions</a></li>
<li><a href="#org96e0edd">Setting a Global Exception Handler</a></li>
</ul>
</li>
<li><a href="#orgcecdbc5">patterns</a>
<ul>
<li><a href="#orgd47f4df">value object pattern</a></li>
<li><a href="#org6ed13a0">The factory pattern</a></li>
</ul>
</li>
<li><a href="#orgb166ce9">files</a>
<ul>
<li><a href="#org729cc9e">Reading Entire files</a></li>
<li><a href="#org54f2d0b">Writing Entire file</a></li>
<li><a href="#orga266250">Reading and writing parts of files</a></li>
<li><a href="#orge457a8b">reading a file one line at a time</a></li>
<li><a href="#org39e396b">Inserting CSV data into a database table</a></li>
<li><a href="#org44ad95d">Writing CSV-formatted data to a file</a></li>
<li><a href="#org14187b7">changing the page type of CSV</a></li>
</ul>
</li>
<li><a href="#org74bbb36">lumen</a>
<ul>
<li><a href="#org156e249">lumen on apache</a></li>
<li><a href="#orgb51961f">installing globally</a></li>
<li><a href="#org393fec9">PHP dependencies</a></li>
<li><a href="#orgf85306e">artisan</a>
<ul>
<li><a href="#orge9b8f57">create a migration</a></li>
<li><a href="#orgb4fcc12">commit migration to db</a></li>
<li><a href="#orgba76ae5">Refreshing the Schema and Seeding the Database</a></li>
</ul>
</li>
<li><a href="#org45a330c">middleware</a></li>
</ul>
</li>
<li><a href="#orgd0e4ecf">elqoquent</a>
<ul>
<li><a href="#orgefff6f2">eloquent postgres json type</a></li>
</ul>
</li>
<li><a href="#org77ba132">installation</a>
<ul>
<li><a href="#orga23d3dc">php packages</a></li>
<li><a href="#org3588c10">phpstorm xdebug</a></li>
</ul>
</li>
<li><a href="#org970eb4f">session handling</a>
<ul>
<li><a href="#orgd0bbc5b">starting a session</a></li>
<li><a href="#org3ae58e0">session variables example</a></li>
<li><a href="#orgb2dc315">custom session handler</a></li>
<li><a href="#orgc9e0ddf">ending a session</a></li>
<li><a href="#org5a5fa41">Exposed Session Data</a></li>
<li><a href="#orgd08d825">making sure session data is not lost after redirect</a></li>
<li><a href="#org6fb21d6">check for session status</a></li>
</ul>
</li>
<li><a href="#org1345619">SPL</a>
<ul>
<li><a href="#org88e5223">Available objects in SPL</a></li>
</ul>
</li>
<li><a href="#org5e49c98">using <code>include_path</code> to manage larget projects</a></li>
<li><a href="#org28c85ef">output buffering</a>
<ul>
<li><a href="#org9245b85">intro</a></li>
<li><a href="#org53612b1">detect if output buffering is turned on?</a></li>
<li><a href="#orgc86ecc7">example</a></li>
</ul>
</li>
<li><a href="#org8c85e6b">request</a>
<ul>
<li><a href="#orga710ed7">check if request is ajax?</a></li>
</ul>
</li>
<li><a href="#orgaa3897c">page generation time</a>
<ul>
<li><a href="#org06e3cc0">solution1</a></li>
<li><a href="#org4a907d2">solution2</a></li>
<li><a href="#orgef84760">solution3</a></li>
</ul>
</li>
<li><a href="#org5b87999">autoloading</a>
<ul>
<li><a href="#orge8203aa">intro</a></li>
</ul>
</li>
<li><a href="#org1d7056b">security</a>
<ul>
<li><a href="#org6fcc233">Cross-site scripting</a></li>
<li><a href="#orgf32b257">Cross-site Request Forgery(CSRF)</a></li>
</ul>
</li>
<li><a href="#orgfac89a9">apache <code>.htaccess</code> sample configuration</a></li>
<li><a href="#org92c6690">turn off DNS prefetching from individual documents</a></li>
<li><a href="#orgdbc5c56">disable caching for a website</a></li>
<li><a href="#org72093df">disable ajax browser caching</a></li>
<li><a href="#org71150f8">query</a></li>
<li><a href="#org6c6a966">error handler</a></li>
<li><a href="#orgdc25fc4">security</a>
<ul>
<li><a href="#org12a81e5">disable <code>register_globals</code></a></li>
</ul>
</li>
<li><a href="#org5525ed6">bootstrap</a>
<ul>
<li><a href="#orgaa31d5e">structure of page</a>
<ul>
<li><a href="#orga7351b8">settings of the viewing arena</a></li>
<li><a href="#orgca458e0">Grid system</a></li>
<li><a href="#org2a6be55">Container</a></li>
<li><a href="#org7d46af9">Device Specific Definitions</a></li>
<li><a href="#org21571d1">Order Column</a></li>
</ul>
</li>
<li><a href="#orgcc1205d">typography</a>
<ul>
<li><a href="#org7a19910">Orientation</a></li>
<li><a href="#org2c45b7d">transformation</a></li>
<li><a href="#org4ac1d3b">lists</a>
<ul>
<li><a href="#org2f56103"><code>.list-unstyled</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd730f66">form</a></li>
<li><a href="#orgc5fdc0b">show/hide bootstrap modals</a></li>
</ul>
</li>
<li><a href="#orgdce577c">HTML</a>
<ul>
<li><a href="#org5bb9127">How do you disable browser Autocomplete on web form field / input tag?</a></li>
<li><a href="#orgebe013a">How to use the “required” attribute with a “radio” input field</a></li>
<li><a href="#org78c9ddf">HTML5 form required attribute. Set custom validation message?</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgd6e16cb" class="outline-2">
<h2 id="orgd6e16cb">regular expression</h2>
<div class="outline-text-2" id="text-orgd6e16cb">
</div><div id="outline-container-orgf3e7a87" class="outline-3">
<h3 id="orgf3e7a87">Finding the nth Occurrence of a Match</h3>
<div class="outline-text-3" id="text-orgf3e7a87">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$todo = "1. Get Dressed 2. Eat Jelly 3. Squash every week into a day";

preg_match_all("/\d\. ([^\d]+)/", $todo, $matches);

print "The second item on the todo list is: ";
// $matches[1] is an array of each substring captured by ([^\d]+)
print $matches[1][1];

print "The entire todo list is: ";
foreach($matches[1] as $match) {
    print "$match\n";
}
?&gt;
</pre>
</div>

<p>
Because the preg<sub>match</sub>() function stops after it finds one match, you
need to use preg<sub>match</sub><sub>all</sub>() instead if you’re looking for additional
matches. The preg<sub>match</sub><sub>all</sub>() function returns the number of full
pattern matches it finds. If it finds no matches, it returns 0. If it
encounters an error, such as a syntax problem in the pattern, it
returns false.
</p>

<p>
The third argument to preg<sub>match</sub><sub>all</sub>() is populated with an array
holding information about the various substrings that the pattern has
matched. The first element holds an array of matches of the complete
pattern. For Example 22-4, this means that $matches[0] holds the parts
of $todo that match <i>\d\. ([^\d]+)</i>: 1. Get Dressed, 2. Eat Jelly,
and 3. Squash every week into a day.
</p>

<p>
Subsequent elements of the $matches array hold arrays of text matched
by each parenthesized subpattern. The pattern in Example 22-4 has just
one subpattern ([^\d]+). So $matches[1] is an array of strings that
match that subpattern: Get Dressed, Eat Jelly, and Squash every week
into a day.
</p>

<p>
If there were a second subpattern, the substrings that it matched
would be in $matches[2], a third subpattern’s matches would be in
$matches[3], and so on.
</p>

<p>
Instead of returning an array divided into full matches and then
submatches, preg<sub>match</sub><sub>all</sub>() can return an array divided by matches,
with each submatch inside. To trigger this, pass PREG<sub>SET</sub><sub>ORDER</sub> in as
the fourth argument. This is particularly useful when you’ve got
multiple captured subpatterns and you want to iterate through the
subpattern groups one group at a time, as shown in Example 22-5.
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$todo = "
first=Get Dressed
next=Eat Jelly
last=Squash every week into a day
";

preg_match_all("/([a-zA-Z]+)=(.*)/", $todo, $matches, PREG_SET_ORDER);

foreach ($matches as $match) {
    print "The {$match[1]} action is {$match[2]} \n";
}
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f51b62" class="outline-3">
<h3 id="org1f51b62">replace n counts of a pattern</h3>
<div class="outline-text-3" id="text-org1f51b62">
<div class="org-src-container">
<pre class="src src-php">preg_replace($pattern,$replacement,$string,$limit);
</pre>
</div>

<p>
$limit is by the default is -1 which means no limit.
</p>
</div>
</div>
</div>
<div id="outline-container-org27f0a97" class="outline-2">
<h2 id="org27f0a97">strings</h2>
<div class="outline-text-2" id="text-org27f0a97">
</div><div id="outline-container-org7f5682e" class="outline-3">
<h3 id="org7f5682e">defining heredoc document</h3>
<div class="outline-text-3" id="text-org7f5682e">
<div class="org-src-container">
<pre class="src src-php">print &lt;&lt;&lt; END
It's funny when signs say things like:
   Original "Root" Beer
   "Free" Gift
   Shoes cleaned while "you" wait
or have other misquoted words.
END;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d87bd4" class="outline-3">
<h3 id="org5d87bd4">Accessing Substrings</h3>
<div class="outline-text-3" id="text-org5d87bd4">
<div class="org-src-container">
<pre class="src src-php">&lt;?php

if (strpos($_POST['email'], '@') === false) {
    print 'There was no @ in the e-mail address!';
 }

?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5dc8d6" class="outline-3">
<h3 id="orgd5dc8d6">Extracting Substrings</h3>
<div class="outline-text-3" id="text-orgd5dc8d6">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$substring = substr($string,$start,$length);
$username = substr($_GET['username'],0,8);
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbfda7af" class="outline-3">
<h3 id="orgbfda7af">substring from beginning of the line except the last char</h3>
<div class="outline-text-3" id="text-orgbfda7af">
<div class="org-src-container">
<pre class="src src-php">substr("abcd",0,-1);       // abc
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4c4369" class="outline-3">
<h3 id="orgf4c4369">Replacing substrings</h3>
<div class="outline-text-3" id="text-orgf4c4369">
<div class="org-src-container">
<pre class="src src-php">// Everything from position $start to the end of $old_string
// becomes $new_substring
$new_string = substr_replace($old_string,$new_substring,$start);

// $length characters, starting at position $start, become $new_substring
$new_string = substr_replace($old_string,$new_substring,$start,$length);
</pre>
</div>
</div>
</div>

<div id="outline-container-org25c66d1" class="outline-3">
<h3 id="org25c66d1">Processing a String One Byte at a Time</h3>
<div class="outline-text-3" id="text-org25c66d1">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$string = "This weekend, I'm going shopping for a pet chicken.";
$vowels = 0;
for ($i = 0, $j = strlen($string); $i &lt; $j; $i++) {
    if (strstr('aeiouAEIOU',$string[$i])) {
        $vowels++;
    }
}
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5f2e8f" class="outline-3">
<h3 id="orgd5f2e8f">Reversing a String by Byte</h3>
<div class="outline-text-3" id="text-orgd5f2e8f">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
print strrev('This is not a palindrome.');
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org07de9f0" class="outline-3">
<h3 id="org07de9f0">Reversing a string by word</h3>
<div class="outline-text-3" id="text-org07de9f0">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$s = "Once upon a time there was a turtle.";
// break the string up into words
$words = explode(' ',$s);
// reverse the array of words
$words = array_reverse($words);
// rebuild the string
$s = implode(' ',$words);
print $s;
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$reversed_s = implode(' ',array_reverse(explode(' ',$s)));
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbded153" class="outline-3">
<h3 id="orgbded153">Switching tabs and spaces</h3>
<div class="outline-text-3" id="text-orgbded153">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$r = mysql_query("SELECT message FROM messages WHERE id = 1") or die();
$ob = mysql_fetch_object($r);
$tabbed = str_replace(' ',"\t",$ob-&gt;message);
$spaced = str_replace("\t",' ',$ob-&gt;message);

print "With Tabs: &lt;pre&gt;$tabbed&lt;/pre&gt;";
print "With Spaces: &lt;pre&gt;$spaced&lt;/pre&gt;";
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0e7553" class="outline-3">
<h3 id="orge0e7553">trimming space</h3>
<div class="outline-text-3" id="text-orge0e7553">
<p>
Use ltrim(), rtrim(), or trim(). ltrim() removes whitespace from the
beginning of a string, rtrim() from the end of a string, and trim()
from both the beginning and end of a string:
</p>
</div>
</div>

<div id="outline-container-org5049c85" class="outline-3">
<h3 id="org5049c85">controlling case</h3>
<div class="outline-text-3" id="text-org5049c85">
</div><div id="outline-container-org37f033e" class="outline-4">
<h4 id="org37f033e">capitalizing letters</h4>
<div class="outline-text-4" id="text-org37f033e">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
print ucfirst("how do you do today?");  //capitalized the first word in string
print ucwords("the prince of wales");  //capitalizes the first character of each word in a string
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f39f6f" class="outline-4">
<h4 id="org1f39f6f">whole string case control</h4>
<div class="outline-text-4" id="text-org1f39f6f">
<p>
The functions strtolower() and strtoupper() work on entire strings,
not just individual characters. All alphabetic characters are changed
to lowercase by strtolower() and strtoupper() changes all alphabetic
characters to uppercase:
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
print strtolower("I programmed the WOPR and the TRS-80.");
print strtoupper('"since feeling is first" is a poem by e. e. cummings.');
?&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org62bdecc" class="outline-3">
<h3 id="org62bdecc">ordinal value of character</h3>
<div class="outline-text-3" id="text-org62bdecc">
<p>
use <code>ord("h")</code>
</p>
</div>
</div>
<div id="outline-container-orgca3b44e" class="outline-3">
<h3 id="orgca3b44e">character value of integer</h3>
<div class="outline-text-3" id="text-orgca3b44e">
<p>
use <code>chr(ascii)</code>
</p>
</div>
</div>
<div id="outline-container-org1b8bcf7" class="outline-3">
<h3 id="org1b8bcf7">replace multiple</h3>
<div class="outline-text-3" id="text-org1b8bcf7">
<div class="org-src-container">
<pre class="src src-php">str_ireplace(['a', 'e', 'i', 'o', 'u'], '!', $str);
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b071ee" class="outline-3">
<h3 id="org0b071ee">convert string to array</h3>
<div class="outline-text-3" id="text-org0b071ee">
<div class="org-src-container">
<pre class="src src-php">// split a string without delimiter
str_split($str);
// split a string with delimiter
str_split(' ',$str);
explode(' ', $str);
</pre>
</div>
</div>
</div>

<div id="outline-container-orga882b78" class="outline-3">
<h3 id="orga882b78">split a string by char</h3>
<div class="outline-text-3" id="text-orga882b78">
<div class="org-src-container">
<pre class="src src-php">preg_split('/,/',$str);   // split by ','
preg_split('//',$str);    // split characters
explode(',', $str);
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ad8a2a" class="outline-3">
<h3 id="org1ad8a2a">split a string to chunks of length n</h3>
<div class="outline-text-3" id="text-org1ad8a2a">
<div class="org-src-container">
<pre class="src src-php">$str="abcdefghijklm";
echo print_r(str_split($str, 3),true);

// result
Array
(
    [0] =&gt; abc
    [1] =&gt; def
    [2] =&gt; ghi
    [3] =&gt; jkl
    [4] =&gt; m
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc554e03" class="outline-3">
<h3 id="orgc554e03">remove alphabet values from string</h3>
<div class="outline-text-3" id="text-orgc554e03">
<div class="org-src-container">
<pre class="src src-php">$res = preg_replace('/^[0-9].,/',$str);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdb8f5d7" class="outline-2">
<h2 id="orgdb8f5d7">numbers</h2>
<div class="outline-text-2" id="text-orgdb8f5d7">
</div><div id="outline-container-orgc545cf9" class="outline-3">
<h3 id="orgc545cf9">Checking Whether a Variable Contains a Valid Number</h3>
<div class="outline-text-3" id="text-orgc545cf9">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
if (is_numeric(5))          { /* true  */ }
if (is_numeric('5'))        { /* true  */ }
if (is_numeric("05"))       { /* true  */ }
if (is_numeric('five'))     { /* false */ }

if (is_numeric(0xDECAFBAD)) { /* true  */ }
if (is_numeric("10e200"))   { /* true  */ }
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b9fcf6" class="outline-3">
<h3 id="org0b9fcf6">comparing floating point numbers</h3>
<div class="outline-text-3" id="text-org0b9fcf6">
<p>
Use a small delta value, and check if the numbers have a difference smaller than that delta:
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$delta = 0.00001;

$a = 1.00000001;
$b = 1.00000000;

if (abs($a - $b) &lt; $delta) { /* $a and $b are equal */ }
?&gt;
</pre>
</div>


<p>
Floating-point numbers are represented in binary form with only a
finite number of bits for the mantissa and the exponent. You get
overflows when you exceed those bits. As a result, sometimes PHP (just
like some other languages) doesn’t believe that two equal numbers are
actually equal because they may differ toward the very end.
</p>

<p>
To avoid this problem, instead of checking if $a == $b, make sure the
first number is within a very small amount ($delta) of the second
one. The size of your delta should be the smallest amount of
difference you care about between two numbers. Then use abs() to get
the absolute value of the difference.
</p>
</div>
</div>
<div id="outline-container-org0a39363" class="outline-3">
<h3 id="org0a39363">Rounding Floating-Point Numbers</h3>
<div class="outline-text-3" id="text-org0a39363">
<p>
To round a number to the closest integer, use round() :
</p>

<p>
$number = round(2.4);   // $number = 2
</p>

<p>
To round up, use ceil() :
</p>

<p>
$number = ceil(2.4);    // $number = 3
</p>

<p>
To round down, use floor() :
</p>

<p>
$number = floor(2.4);   // $number = 2
</p>

<p>
To keep a set number of digits after the decimal point, round()
accepts an optional precision argument. For example, perhaps you are
calculating thetotal price for the items in a user’s shopping cart:
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$cart = 54.23;
$tax = $cart * .05;
$total = $cart + $tax;       // $total = 56.9415

$final = round($total, 2);   // $final = 56.94
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org28db7c6" class="outline-3">
<h3 id="org28db7c6">Converting between bases</h3>
<div class="outline-text-3" id="text-org28db7c6">
<p>
Use the base<sub>convert</sub>() function:
</p>

<p>
$hex = 'a1';                           // hexadecimal number (base 16)
</p>

<p>
<i>/ convert from base 16 to base 10
$decimal = base<sub>convert</sub>($hex, 16, 10); /</i> $decimal is now 161
</p>

<p>
The base<sub>convert</sub>() function changes a string in one base to the
correct string in another. It works for all bases from 2 to 36
inclusive, using the letters a through z as additional symbols for
bases above 10. The first argument is the number to be converted,
followed by the base it is in and the base you want it to become.
</p>

<p>
There are also a few specialized functions for conversions to and from
base 10 and the most commonly used other bases of 2, 8,
and 16. They’re bindec() and decbin(), octdec() and decoct(), and
hexdec() and dechex() :
</p>

<p>
<i>/ convert to base 10
print bindec(11011); /</i> 27
print octdec(33);    <i>/ 27
print hexdec('1b');  /</i> 27
</p>

<p>
<i>/ convert from base 10
print decbin(27);    /</i> 11011
print decoct(27);    <i>/ 33
print dechex(27);    /</i> 1b
</p>

<p>
Another alternative is to use printf(), which allows you to convert
decimal numbers to binary, octal, and hexadecimal numbers with a wide
range of formatting, such as leading zeros and a choice between upper-
and lowercase letters for hexadecimal numbers.
</p>

<p>
For instance, say you want to print out HTML color values:
</p>

<p>
printf('#%02X%02X%02X', 0, 102, 204); // #0066CC
</p>
</div>
</div>
</div>

<div id="outline-container-orgfe0a047" class="outline-2">
<h2 id="orgfe0a047">arrays</h2>
<div class="outline-text-2" id="text-orgfe0a047">
</div><div id="outline-container-orgc40efc0" class="outline-3">
<h3 id="orgc40efc0">check for empty array</h3>
<div class="outline-text-3" id="text-orgc40efc0">
<div class="org-src-container">
<pre class="src src-php">empty([]) // true
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf9fe6a" class="outline-3">
<h3 id="orgcf9fe6a">sum of items in an array</h3>
<div class="outline-text-3" id="text-orgcf9fe6a">
<div class="org-src-container">
<pre class="src src-php">$scores  = array(98, 76, 56, 80);
$total   = array_sum($scores);    // $total = 310
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a7081b" class="outline-3">
<h3 id="org2a7081b">Specifying an Array Not Beginning at Element 0</h3>
<div class="outline-text-3" id="text-org2a7081b">
<p>
Instruct array() to use a different index using the =&gt; syntax:
</p>
<div class="org-src-container">
<pre class="src src-php">$residents = array(1 =&gt; 'Washington', 'Adams', 'Jefferson', 'Madison');

foreach ($presidents as $number =&gt; $president) {
    print "$number: $president\n";
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2ad772" class="outline-3">
<h3 id="orga2ad772">Storing Multiple Elements Per Key in an Array</h3>
<div class="outline-text-3" id="text-orga2ad772">
<p>
Store the multiple elements in an array:
</p>

<div class="org-src-container">
<pre class="src src-php">$fruits = array('red' =&gt; array('strawberry','apple'),
                'yellow' =&gt; array('banana'));
</pre>
</div>

<p>
Or use an object:
</p>

<div class="org-src-container">
<pre class="src src-php">while ($obj = mysql_fetch_object($r)) {
    $fruits[] = $obj;
}
</pre>
</div>

<p>
In PHP, keys are unique per array, so you can’t associate more than
one entry in a key without overwriting the old value. Instead, store
your values in an anonymous array:
</p>
<div class="org-src-container">
<pre class="src src-php">$fruits['red'][] = 'strawberry';
$fruits['red'][] = 'apple';
$fruits['yellow'][] = 'banana';
</pre>
</div>

<p>
Or, if you’re processing items in a loop:
</p>

<div class="org-src-container">
<pre class="src src-php">while (list($color,$fruit) = mysql_fetch_array($r)) {
    $fruits[$color][] = $fruit;
}
</pre>
</div>

<p>
To print the entries, loop through the array:
</p>

<div class="org-src-container">
<pre class="src src-php">foreach ($fruits as $color=&gt;$color_fruit) {
    // $color_fruit is an array
    foreach ($color_fruit as $fruit) {
        print "$fruit is colored $color.&lt;br&gt;";
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org769d71c" class="outline-3">
<h3 id="org769d71c">Initializing an Array to a Range of Integers</h3>
<div class="outline-text-3" id="text-org769d71c">
<div class="org-src-container">
<pre class="src src-php">range($start, $stop):
$cards = range(1, 52);
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd062d08" class="outline-3">
<h3 id="orgd062d08">Iterating through an array</h3>
<div class="outline-text-3" id="text-orgd062d08">
<p>
Use foreach:
</p>

<div class="org-src-container">
<pre class="src src-php">foreach ($array as $value) {
    // Act on $value
}

#Or to get an array’s keys and values:

foreach ($array as $key =&gt; $value) {
    // Act II
}

#Another technique is to use for:

for ($key = 0, $size = count($array); $key &lt; $size; $key++) {
   // Act III
}

#Finally, you can use each() in combination with list() and while:

reset($array) // reset internal pointer to beginning of array
while (list($key, $value) = each ($array)) {
    // Final Act
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org12cd7ef" class="outline-3">
<h3 id="org12cd7ef">Deleting elements from an array</h3>
<div class="outline-text-3" id="text-org12cd7ef">
<p>
To delete one element, use unset():
</p>
<div class="org-src-container">
<pre class="src src-php">unset($array[3]);
unset($array['foo']);
</pre>
</div>
<p>
To delete multiple noncontiguous elements, also use unset():
</p>
<div class="org-src-container">
<pre class="src src-php">unset($array[3], $array[5]);
unset($array['foo'], $array['bar']);
</pre>
</div>
<p>
To delete multiple contiguous elements, use array<sub>splice</sub>():
</p>
<div class="org-src-container">
<pre class="src src-php">array_splice($array, $offset, $length);
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f38577" class="outline-3">
<h3 id="org1f38577">Changing array size</h3>
<div class="outline-text-3" id="text-org1f38577">
<p>
Use array<sub>pad</sub>() to make an array grow:
</p>

<p>
// start at three
$array = array('apple', 'banana', 'coconut');
</p>

<p>
// grow to five
$array = array<sub>pad</sub>($array, 5, '');
</p>

<p>
Now, count($array) is 5, and the last two elements, $array[3] and $array[4], contain the empty string.
</p>

<p>
To reduce an array, you can use array<sub>splice</sub>():
</p>

<p>
// no assignment to $array
array<sub>splice</sub>($array, 2);
</p>

<p>
This removes all but the first two elements from $array.
</p>
</div>
</div>
<div id="outline-container-org1368f30" class="outline-3">
<h3 id="org1368f30">Appending one array to another</h3>
<div class="outline-text-3" id="text-org1368f30">
<p>
The array<sub>merge</sub>() function works with both predefined arrays and arrays defined
in place using array() :
</p>

<div class="org-src-container">
<pre class="src src-php">$p_languages = array('Perl', 'PHP');
$p_languages = array_merge($p_languages, array('Python'));
print_r($p_languages);
Array
(
    [0] =&gt; PHP
    [1] =&gt; Perl
    [2] =&gt; Python
)
</pre>
</div>

<p>
Merging arrays with only numerical keys causes the arrays to get
renumbered, so values aren’t lost. Merging arrays with string keys
causes the second array to overwrite the value of any duplicated
keys. Arrays with both types of keys exhibit both types of
behavior. For example:
</p>

<pre class="example">
$lc = array('a', 'b' =&gt; 'b'); // lower-case letters as values
$uc = array('A', 'b' =&gt; 'B'); // upper-case letters as values
$ac = array_merge($lc, $uc);  // all-cases?
print_r($ac);
Array
(
    [0] =&gt; a
    [b] =&gt; B
    [1] =&gt; A
)
</pre>

<p>
The uppercase A has been renumbered from index 0 to index 1, to avoid
a collision, and merged onto the end. The uppercase B has overwritten
the lowercase b and replaced it in the original place within the
array.
</p>

<p>
The + operator can also merge arrays. The array on the right
overwrites any identically named keys found on the left. It doesn’t do
any reordering to prevent collisions. Using the previous example:
</p>

<pre class="example">
print_r($uc + $lc);
print_r($lc + $uc);
Array
(
    [0] =&gt; a
    [b] =&gt; b
)
Array
(
    [0] =&gt; A
    [b] =&gt; B
)
</pre>
</div>
</div>

<div id="outline-container-orga8a1aee" class="outline-3">
<h3 id="orga8a1aee">Turning an Array into a String</h3>
<div class="outline-text-3" id="text-orga8a1aee">
<p>
You have an array, and you want to convert it into a nicely formatted string.
</p>

<p>
Use join():
</p>
<div class="org-src-container">
<pre class="src src-php">// make a comma delimited list
$string = join(',', $array);
</pre>
</div>

<p>
Or loop yourself:
</p>
<div class="org-src-container">
<pre class="src src-php">$string = '';

foreach ($array as $key =&gt; $value) {
    $string .= ",$value";
}

$string = substr($string, 1); // remove leading ","
</pre>
</div>
</div>
</div>

<div id="outline-container-org11f772d" class="outline-3">
<h3 id="org11f772d">Checking if a Key Is in an Array</h3>
<div class="outline-text-3" id="text-org11f772d">
<p>
Use array<sub>key</sub><sub>exists</sub>() to check for a key no matter what the associated value is:
</p>

<p>
if (array<sub>key</sub><sub>exists</sub>('key', $array)) {
    <i>* there is a value for $array['key'] *</i>
}
</p>

<p>
Use isset() to find a key whose associated value is anything but null:
</p>

<p>
if (isset($array['key'])) { <i>* there is a non-null value for 'key' in $array *</i> }
</p>

<p>
Discussion
</p>

<p>
The array<sub>key</sub><sub>exists</sub>() function completely ignores array values—it
just reports whether there is an element in the array with a
particular key. isset(), however, behaves the same way on array keys
as it does with other variables. A null value causes isset() to return
false.
</p>
</div>
</div>

<div id="outline-container-org2f72e7d" class="outline-3">
<h3 id="org2f72e7d">Checking if an Element Is in an Array</h3>
<div class="outline-text-3" id="text-org2f72e7d">
<p>
Use in<sub>array</sub>():
</p>

<p>
if (in<sub>array</sub>($value, $array)) {
    // an element has $value as its value in array $array
}
</p>

<p>
The default behavior of in<sub>array</sub>() is to compare items using the <code>=
operator. To use the strict equality check, ==</code>, pass true as the
third parameter to in<sub>array</sub>():
</p>

<p>
$array = array(1, '2', 'three');
</p>

<p>
in<sub>array</sub>(0, $array);        <i>/ true!
in<sub>array</sub>(0, $array, true);  /</i> false
in<sub>array</sub>(1, $array);        <i>/ true
in<sub>array</sub>(1, $array, true);  /</i> true
in<sub>array</sub>(2, $array);        <i>/ true
in<sub>array</sub>(2, $array, true);  /</i> false
</p>
</div>
</div>
<div id="outline-container-org2b75e97" class="outline-3">
<h3 id="org2b75e97">Finding the Position of a Value in an Array</h3>
<div class="outline-text-3" id="text-org2b75e97">
<p>
Use array<sub>search</sub>() . It returns the key of the found value. If the
value is not in the array, it returns false:
</p>

<p>
$position = array<sub>search</sub>($value, $array);
if ($position !== false) {
    // the element in position $position has $value as its value in array $array
}
</p>
</div>
</div>
<div id="outline-container-org9391bd4" class="outline-3">
<h3 id="org9391bd4">Finding Elements That Pass a Certain Test</h3>
<div class="outline-text-3" id="text-org9391bd4">
<p>
Use a foreach loop:
</p>

<p>
$movies = array(&#x2026;);
</p>

<p>
foreach ($movies as $movie) {
    if ($movie['box<sub>office</sub><sub>gross</sub>'] &lt; 5000000) { $flops[] = $movie; }
}
</p>

<p>
Or array<sub>filter</sub>():
</p>

<p>
$movies = array(&#x2026;);
</p>

<p>
function flops($movie) {
    return ($movie['box<sub>office</sub><sub>gross</sub>'] &lt; 5000000) ? 1 : 0;
}
</p>

<p>
$flops = array<sub>filter</sub>($movies, 'flops');
</p>
</div>
</div>
<div id="outline-container-org85b5288" class="outline-3">
<h3 id="org85b5288">Finding the Largest or Smallest Valued Element in an Array</h3>
<div class="outline-text-3" id="text-org85b5288">
<p>
To find the largest element, use max():
</p>

<p>
$largest = max($array);
</p>

<p>
To find the smallest element, use min():
</p>

<p>
$smallest = min($array);
</p>
</div>
</div>
<div id="outline-container-org1cea9e2" class="outline-3">
<h3 id="org1cea9e2">Sorting an Array</h3>
<div class="outline-text-3" id="text-org1cea9e2">
<p>
To sort an array using the traditional definition of sort, use sort():
</p>

<p>
$states = array('Delaware', 'Pennsylvania', 'New Jersey');
sort($states);
</p>

<p>
To sort numerically, pass SORT<sub>NUMERIC</sub> as the second argument to sort():
</p>

<p>
$scores = array(1, 10, 2, 20);
sort($scores, SORT<sub>NUMERIC</sub>);
</p>

<p>
This resorts the numbers in ascending order (1, 2, 10, 20) instead of
lexicographical order (1, 10, 2, 20).
</p>

<p>
The sort() function doesn’t preserve the key/value association between
elements; instead, entries are reindexed starting at 0 and going
upward. (The one exception to this rule is a one-element array; its
lone element doesn’t have its index reset to 0. This is fixed as of
PHP 4.2.3.)
</p>

<p>
To preserve the key/value links, use asort(). The asort() function is
normally used for associative arrays, but it can also be useful when
the indexes of the entries are meaningful:
</p>

<p>
$states = array(1 =&gt; 'Delaware', 'Pennsylvania', 'New Jersey');
asort($states);
</p>

<p>
while (list($rank, $state) = each($states)) {
    print "$state was the #$rank state to join the United States\n";
</p>

<p>
}
</p>

<p>
Use natsort() to sort the array using a natural sorting
algorithm. Under natural sorting, you can mix strings and numbers
inside your elements and still get the right answer:
</p>

<p>
$tests = array('test1.php', 'test10.php', 'test11.php', 'test2.php');
natsort($tests);
</p>

<p>
The elements are now ordered 'test1.php', 'test2.php', 'test10.php',
and 'test11.php'. With natural sorting, the number 10 comes after the
number 2; the opposite occurs under traditional sorting. For
case-insensitive natural sorting, use natcasesort().
</p>

<p>
To sort the array in reverse order, use rsort() or arsort(), which is
like rsort() but also preserves keys. There is no natrsort() or
natcasersort(). You can also pass SORT<sub>NUMERIC</sub> into these functions.
</p>
</div>
</div>
<div id="outline-container-orgec07308" class="outline-3">
<h3 id="orgec07308">Randomizing an Array</h3>
<div class="outline-text-3" id="text-orgec07308">
<p>
Use shuffle():
</p>

<p>
shuffle($array);
</p>
</div>
</div>

<div id="outline-container-org0daa2a6" class="outline-3">
<h3 id="org0daa2a6">Removing Duplicate Elements from an Array</h3>
<div class="outline-text-3" id="text-org0daa2a6">
<p>
If the array is already complete, use array<sub>unique</sub>(), which returns a
new array that contains no duplicate values:
</p>

<p>
$unique = array<sub>unique</sub>($array);
</p>

<p>
If you create the array while processing results, here is a technique for numerical arrays:
</p>

<p>
foreach ($<sub>REQUEST</sub>['fruits'] as $fruit) {
    if (!in<sub>array</sub>($array, $fruit)) { $array[] = $fruit; }
}
</p>

<p>
Here’s one for associative arrays:
</p>

<p>
foreach ($<sub>REQUEST</sub>['fruits'] as $fruit) {
    $array[$fruit] = $fruit;
}
</p>
</div>
</div>
<div id="outline-container-orgd39d039" class="outline-3">
<h3 id="orgd39d039">Applying a Function to Each Element in an Array</h3>
<div class="outline-text-3" id="text-orgd39d039">
<p>
Use array<sub>walk</sub>():
</p>
<div class="org-src-container">
<pre class="src src-php">function escape_data(&amp;$value, $key) {
  $value = htmlentities($value, ENT_QUOTES);
}

$names = array('firstname' =&gt; "Baba",
               'lastname'  =&gt; "O'Riley");

array_walk($names, 'escape_data');

foreach ($names as $name) {
  print "$name\n";
}
</pre>
</div>

<p>
Baba
O&amp;#039;Riley
</p>

<p>
For nested data, use array<sub>walk</sub><sub>recursive</sub>():
</p>

<div class="org-src-container">
<pre class="src src-php">function escape_data(&amp;$value, $key) {
  $value = htmlentities($value, ENT_QUOTES);
}

$names = array('firstnames' =&gt; array("Baba", "Bill"),
               'lastnames'  =&gt; array("O'Riley", "O'Reilly"));

array_walk_recursive($names, 'escape_data');

foreach ($names as $nametypes) {
  foreach ($nametypes as $name) {
    print "$name\n";
  }
}
</pre>
</div>

<p>
Baba
Bill
O&amp;#039;Riley
O&amp;#039;Reilly
</p>
</div>
</div>
<div id="outline-container-orgefd7f6d" class="outline-3">
<h3 id="orgefd7f6d">Finding the Union, Intersection, or Difference of Two Arrays</h3>
<div class="outline-text-3" id="text-orgefd7f6d">
<p>
To compute the union:
</p>

<p>
$union = array<sub>unique</sub>(array<sub>merge</sub>($a, $b));
</p>

<p>
To compute the intersection:
</p>

<p>
$intersection = array<sub>intersect</sub>($a, $b);
</p>

<p>
To find the simple difference:
</p>

<p>
$difference = array<sub>diff</sub>($a, $b);
</p>

<p>
And for the symmetric difference:
</p>

<p>
$difference = array<sub>merge</sub>(array<sub>diff</sub>($a, $b), array<sub>diff</sub>($b, $a));
</p>
</div>
</div>
<div id="outline-container-org07cb094" class="outline-3">
<h3 id="org07cb094">Making an Object Act like an Array</h3>
<div class="outline-text-3" id="text-org07cb094">
<p>
Implement SPL’s ArrayAccess interface:
</p>

<p>
class FakeArray implements ArrayAccess {
</p>

<p>
private $elements;
</p>

<p>
public function _<sub>construct</sub>() {
  $this-&gt;elements = array();
}
</p>

<p>
public function offsetExists($offset) {
  return isset($this-&gt;elements[$offset]);
}
</p>

<p>
public function offsetGet($offset) {
  return $this-&gt;elements[$offset];
}
</p>

<p>
public function offsetSet($offset, $value) {
  return $this-&gt;elements[$offset] = $value;
}
</p>

<p>
public function offsetUnset($offset) {
  unset($this-&gt;elements[$offset]);
}
}
</p>

<p>
$array = new FakeArray;
</p>

<p>
// What's Opera, Doc?
$array['animal'] = 'wabbit';
</p>

<p>
// Be very quiet I'm hunting wabbits
if (isset($array['animal']) &amp;&amp;
	// Wabbit tracks!!!
    $array['animal'] == 'wabbit') {
</p>

<p>
// Kill the wabbit, kill the wabbit, kill the wabbit
unset($array['animal']);
// Yo ho to oh! Yo ho to oh! Yo ho&#x2026;
}    
</p>

<p>
<i>/ What have I done?? I've killed the wabbit&#x2026;.
/</i> Poor little bunny, poor little wabbit&#x2026;
if (!isset($array['animal'])) {
	print "Well, what did you expect in an opera? A happy ending?\n";
}
Well, what did you expect in an opera? A happy ending?
</p>
</div>
</div>

<div id="outline-container-orgcc4bfe2" class="outline-3">
<h3 id="orgcc4bfe2">array<sub>reduce</sub></h3>
<div class="outline-text-3" id="text-orgcc4bfe2">
<p>
syntax
   mixed array<sub>reduce</sub> ( array $array , callable $callback [, mixed $initial = NULL ] )
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
function sum($carry, $item)
{
    $carry += $item;
    return $carry;
}

function product($carry, $item)
{
    $carry *= $item;
    return $carry;
}

$a = array(1, 2, 3, 4, 5);
$x = array();

var_dump(array_reduce($a, "sum")); // int(15)
var_dump(array_reduce($a, "product", 10)); // int(1200), because: 10*1*2*3*4*5
var_dump(array_reduce($x, "sum", "No data to reduce")); // string(17) "No data to reduce"
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5177cce" class="outline-3">
<h3 id="org5177cce">create and array from variables and their values</h3>
<div class="outline-text-3" id="text-org5177cce">
</div><div id="outline-container-org7e0dd5e" class="outline-4">
<h4 id="org7e0dd5e">intro</h4>
<div class="outline-text-4" id="text-org7e0dd5e">
<p>
There may also be times when you’ll want to use compact, the inverse
of extract, to create an array from variables and their
values. Example 6-14 shows how you might use this function.
</p>

<p>
Example 6-14. Using the compact function
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$fname   = "Elizabeth";
$sname   = "Windsor";
$address = "Buckingham Palace";
$city    = "London";
$country = "United Kingdom";

$contact = compact('fname', 'sname', 'address', 'city', 'country');
print_r($contact);
?&gt;
</pre>
</div>

<p>
The result of running Example 6-14 is:
</p>
<pre class="example">
Array
(
    [fname] =&gt; Elizabeth
    [sname] =&gt; Windsor
    [address] =&gt; Buckingham Palace
    [city] =&gt; London
    [country] =&gt; United Kingdom
)
</pre>

<p>
Note that compact requires the variable names to be supplied in quotes
and not as variables preceded with a $ symbol. This is because compact
is looking for an array of variable names.
</p>
</div>
</div>

<div id="outline-container-orgf951a2f" class="outline-4">
<h4 id="orgf951a2f">using compact for debugging</h4>
<div class="outline-text-4" id="text-orgf951a2f">
<p>
Another use of this function is for debugging, when you wish to
quickly view several variables and their values, as in Example 6-15.
</p>

<p>
Example 6-15. Using compact to help with debugging
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$j       = 23;
$temp    = "Hello";
$address = "1 Old Street";
$age     = 61;

print_r(compact(explode(' ', 'j temp address age')));
?&gt;
</pre>
</div>

<p>
This works by using the explode function to extract all the words from
the string into an array, which is then passed to the compact
function. This function in turn returns an array to print<sub>r</sub>, which
shows its contents.
</p>

<p>
If you copy and paste the print<sub>r</sub> line of code, you only need to alter
the variables named there for a quick printout of a group of
variables’ values. In this example, the output is:
</p>
<pre class="example">
Array
(
    [j] =&gt; 23
    [temp] =&gt; Hello
    [address] =&gt; 1 Old Street
    [age] =&gt; 61
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1521e69" class="outline-3">
<h3 id="org1521e69">flatten php array</h3>
<div class="outline-text-3" id="text-org1521e69">
<div class="org-src-container">
<pre class="src src-php">function array_flatten($array, $return = array())
{
    foreach ($array as $key =&gt; $value)
    {
        if (is_array($value) || is_object($value))
        {
            $return = array_flatten($value, $return);
        }
        else
        {
            $return[] = $value;
        }
    }
    return $return;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd511018" class="outline-2">
<h2 id="orgd511018">Date and Time</h2>
<div class="outline-text-2" id="text-orgd511018">
</div><div id="outline-container-org06755db" class="outline-3">
<h3 id="org06755db">Finding the Current Date and Time</h3>
<div class="outline-text-3" id="text-org06755db">
<p>
Use strftime() or date() for a formatted time string, as in Example 3-2.
</p>

<p>
<b>Example 3-2. Finding the current date and time</b>
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
print strftime('%c');
print "\n";
print date('r');
?&gt;
</pre>
</div>

<p>
Example 3-2 prints:
</p>
<pre class="example">
Wed May 10 18:29:59 2006
Wed, 10 May 2006 18:29:59 -0400
</pre>

<p>
<b>Use getdate() or localtime() if you want time parts.</b>
Example 3-3 shows how these functions work.
</p>

<p>
Example 3-3. Finding time parts
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$now_1 = getdate();
$now_2 = localtime();
print "{$now_1['hours']}:{$now_1['minutes']}:{$now_1['seconds']}\n";
print "$now_2[2]:$now_2[1]:$now_2[0]";
</pre>
</div>

<p>
Example 3-3 prints:
</p>
<pre class="example">
18:23:45
18:23:45
</pre>

<p>
<b>Example 3-4 shows how to use getdate() to print out the month, day, and year.</b>
</p>

<p>
Example 3-4. Finding the month, day, and year
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = getdate();
printf('%s %d, %d',$a['month'],$a['mday'],$a['year']);
?&gt;
</pre>
</div>

<p>
Example 3-4 prints:
</p>
<pre class="example">
May 5, 2007
</pre>

<p>
Pass getdate() an epoch timestamp as an argument to make the returned
array the appropriate values for local time at that timestamp. The
month, day, and year at epoch timestamp 163727100 is shown in Example
3-5.
</p>

<p>
Example 3-5. getdate() with a specific timestamp
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = getdate(163727100);
printf('%s %d, %d',$a['month'],$a['mday'],$a['year']);
?&gt;
</pre>
</div>

<p>
Example 3-5 prints:
</p>
<pre class="example">
March 10, 1975
</pre>

<p>
The function localtime() returns an array of time and date parts. It
also takes an epoch timestamp as an optional first argument, as well
as a boolean as an optional second argument. If that second argument
is true, localtime() returns an associative array instead of a
numerically indexed array. The keys of that array are the same as the
members of the tm<sub>struct</sub> structure that the C function localtime()
returns, as shown in Table 3-2.
</p>

<p>
<b>Example 3-6 shows how to use localtime() to print out today’s date in month/day/year format.</b>
</p>

<p>
Example 3-6. Using localtime()
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = localtime();
$a[4] += 1;
$a[5] += 1900;
print "$a[4]/$a[3]/$a[5]";
</pre>
</div>

<p>
Example 3-6 prints:
</p>
<pre class="example">
6/23/2006
</pre>

<p>
The month is incremented by 1 before printing since localtime() starts
counting months with 0 for January, but we want to display 1 if the
current month is January. Similarly, the year is incremented by 1900
because localtime() starts counting years with 0 for 1900.
</p>
</div>
</div>

<div id="outline-container-org590fa06" class="outline-3">
<h3 id="org590fa06">Converting Time and Date Parts to an Epoch Timestamp</h3>
<div class="outline-text-3" id="text-org590fa06">
<p>
Use mktime() if your time and date parts are in the local time zone,
as shown in Example 3-7.
</p>

<p>
Example 3-7. Getting a specific epoch timestamp
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 7:45:03 PM on March 10, 1975, local time
$then = mktime(19,45,3,3,10,1975);
?&gt;
</pre>
</div>

<p>
Use gmmktime() , as in Example 3-8, if your time and date parts are in
GMT.
</p>

<p>
Example 3-8. Getting a specific GMT-based epoch timestamp
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 7:45:03 PM on March 10, 1975, in GMT
$then = gmmktime(19,45,3,3,10,1975);
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org078a542" class="outline-3">
<h3 id="org078a542">Converting an Epoch Timestamp to Time and Date Parts</h3>
<div class="outline-text-3" id="text-org078a542">
<p>
Pass an epoch timestamp to getdate(): $time<sub>parts</sub> = getdate(163727100);.
</p>
</div>
</div>
<div id="outline-container-org8b336f8" class="outline-3">
<h3 id="org8b336f8">Finding the Difference of Two Dates</h3>
<div class="outline-text-3" id="text-org8b336f8">
<p>
Convert both dates to epoch timestamps and subtract one from the
other. Example 3-13 separates the difference into weeks, days, hours,
minutes, and seconds.
</p>

<p>
Example 3-13. Calculating the difference between two dates
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 7:32:56 pm on May 10, 1965
$epoch_1 = mktime(19,32,56,5,10,1965);
// 4:29:11 am on November 20, 1962
$epoch_2 = mktime(4,29,11,11,20,1962);

$diff_seconds  = $epoch_1 - $epoch_2;
$diff_weeks    = floor($diff_seconds/604800);
$diff_seconds -= $diff_weeks   * 604800;
$diff_days     = floor($diff_seconds/86400);
$diff_seconds -= $diff_days    * 86400;
$diff_hours    = floor($diff_seconds/3600);
$diff_seconds -= $diff_hours   * 3600;
$diff_minutes  = floor($diff_seconds/60);
$diff_seconds -= $diff_minutes * 60;

print "The two dates have $diff_weeks weeks, $diff_days days, ";
print "$diff_hours hours, $diff_minutes minutes, and $diff_seconds ";
print "seconds elapsed between them.";
?&gt;
</pre>
</div>

<p>
Example 3-13 prints:
</p>

<p>
The two dates have 128 weeks, 6 days, 14 hours, 3 minutes, 
and 45 seconds elapsed between them.
</p>

<p>
Note that the difference isn’t divided into larger chunks than weeks
(i.e., months or years) because those chunks have variable length and
wouldn’t give an accurate count of the time difference calculated.
</p>
</div>
</div>

<div id="outline-container-org681848c" class="outline-3">
<h3 id="org681848c">date difference using <code>DateInterval</code></h3>
<div class="outline-text-3" id="text-org681848c">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1-&gt;diff($datetime2);
echo $interval-&gt;format('%R%a days');
?&gt;
</pre>
</div>

<p>
Procedural style
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval-&gt;format('%R%a days');
?&gt;
</pre>
</div>

<p>
The above examples will output:
</p>

<p>
+2 days
</p>
</div>
</div>

<div id="outline-container-org32af68e" class="outline-3">
<h3 id="org32af68e">number of days between two dates</h3>
<div class="outline-text-3" id="text-org32af68e">
<div class="org-src-container">
<pre class="src src-php">$today-&gt;diff($yesterday)-&gt;days;

date_diff($today, $yesterday)-&gt;days;

// using epoch timestamp
// 86400 is number of seoconds in day
$today-&gt;getTimestamp() - $yesterday-&gt;getTimestamp()/86400;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0e093bf" class="outline-3">
<h3 id="org0e093bf">convert seconds to time with format HH:MM:SS</h3>
<div class="outline-text-3" id="text-org0e093bf">
<div class="org-src-container">
<pre class="src src-php">date('H:i:s', $seconds);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8a24443" class="outline-2">
<h2 id="org8a24443">variables</h2>
<div class="outline-text-2" id="text-org8a24443">
</div><div id="outline-container-org14ba1d9" class="outline-3">
<h3 id="org14ba1d9">Establishing a Default Value</h3>
<div class="outline-text-3" id="text-org14ba1d9">
<p>
Use isset() to assign a default to a variable that may already have a value:
</p>
<div class="org-src-container">
<pre class="src src-php">if (! isset($cars)) { $cars = $default_cars; }
</pre>
</div>

<p>
Use the ternary (a ? b : c) operator to give a new variable a (possibly default) value:
</p>
<div class="org-src-container">
<pre class="src src-php">$cars = isset($_REQUEST['cars']) ? $_REQUEST['cars'] : $default_cars;
</pre>
</div>

<p>
Using isset() is essential when assigning default values. Without it,
the nondefault value can’t be 0 or anything else that evaluates to
false. Consider this assignment:
</p>

<div class="org-src-container">
<pre class="src src-php">$cars = $_REQUEST['cars'] ? $_REQUEST['cars'] : $default_cars;
</pre>
</div>

<p>
If $<sub>REQUEST</sub>['cars'] is 0, $cars is set to $default<sub>cars</sub> even though 0
may be a valid value for $cars.
</p>

<p>
An alternative syntax for checking arrays is the array<sub>key</sub><sub>exists</sub>() function:
</p>
<div class="org-src-container">
<pre class="src src-php">$cars = array_key_exists('cars', $_REQUEST) ? $_REQUEST['cars'] : $default_cars;
</pre>
</div>
<p>
The one difference between isset() and array<sub>key</sub><sub>exists</sub>() is that when
a key exists but its value is null, then array<sub>key</sub><sub>exists</sub>() returns
true, while isset() returns false:
</p>
<div class="org-src-container">
<pre class="src src-php">$vehicles = array('cars' =&gt; null);
array_key_exists('cars', $vehicles); // true
isset($vehicles['cars']);            // false
</pre>
</div>
</div>
</div>
<div id="outline-container-org648a3dd" class="outline-3">
<h3 id="org648a3dd">Exchanging Values Without Using Temporary Variables</h3>
<div class="outline-text-3" id="text-org648a3dd">
<p>
To swap $a and $b:
</p>
<div class="org-src-container">
<pre class="src src-php">list($a,$b) = array($b,$a);
</pre>
</div>
</div>
</div>

<div id="outline-container-org3723f1b" class="outline-3">
<h3 id="org3723f1b">Creating a Dynamic Variable Name</h3>
<div class="outline-text-3" id="text-org3723f1b">
<p>
You want to construct a variable’s name dynamically. For example, you
want to use variable names that match the field names from a database
query.
</p>

<p>
Use PHP’s variable variable syntax by prepending a $ to a variable
whose value is the variable name you want:
</p>
<div class="org-src-container">
<pre class="src src-php">$animal = 'turtles';
$turtles = 103;
print $$animal;    // 103
</pre>
</div>

<p>
Using curly braces , you can construct more complicated expressions that indicate variable names:
</p>

<p>
$stooges = array('Moe','Larry','Curly');
$stooge<sub>moe</sub> = 'Moses Horwitz';
$stooge<sub>larry</sub> = 'Louis Feinberg';
$stooge<sub>curly</sub> = 'Jerome Horwitz';
</p>

<p>
foreach ($stooges as $s) {
  print "$s's real name was ${'stooge_'.strtolower($s)}.\n";
}
Moe's real name was Moses Horwitz.
Larry's real name was Louis Feinberg.
Curly's real name was Jerome Horwitz.
</p>

<p>
PHP evaluates the expression between the curly braces and uses it as a
variable name. That expression can even have function calls in it,
such as strtolower().
</p>

<p>
Variable variables are also useful when iterating through similarly
named variables. Say you are querying a database table that has fields
named title<sub>1</sub>, title<sub>2</sub>, etc. If you want to check if a title matches
any of those values, the easiest way is to loop through them like
this:
</p>

<p>
for ($i = 1; $i &lt;= $n; $i++) {
    $t = "title_$i";
    if ($title == $$t) { <i>* match *</i> }
}
</p>

<p>
Of course, it would be more straightforward to store these values in
an array, but if you are maintaining old code that uses this technique
(and you can’t change it), variable variables are helpful.
</p>

<p>
The curly brace syntax is also necessary in resolving ambiguity about
array elements. The variable variable $$donkeys[12] could have two
meanings. The first is “take what’s in the 12th element of the
$donkeys array and use that as a variable name.” Write this as:
${$donkeys[12]}. The second is “use what’s in the scalar $donkeys as
an array name and look in the 12th element of that array.” Write this
as: ${$donkeys}[12].
</p>

<p>
You are not limited by two dollar signs. You can use three, or more,
but in practice it’s rare to see greater than two levels of
indirection.
</p>
</div>
</div>

<div id="outline-container-orgcebcab6" class="outline-3">
<h3 id="orgcebcab6">Using Static Variables</h3>
<div class="outline-text-3" id="text-orgcebcab6">
<p>
Declare the variable as static:
</p>
<div class="org-src-container">
<pre class="src src-php">function track_times_called() {
    static $i = 0;
    $i++;
    return $i;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org88c36d5" class="outline-3">
<h3 id="org88c36d5">Encapsulating Complex Data Types in a String</h3>
<div class="outline-text-3" id="text-org88c36d5">
<p>
You want a string representation of an array or object for storage in
a file or database. This string should be easily reconstitutable into
the original array or object.  Solution
</p>

<p>
Use serialize() to encode variables and their values into a textual form:
</p>

<div class="org-src-container">
<pre class="src src-php">$pantry = array('sugar' =&gt; '2 lbs.','butter' =&gt; '3 sticks');
$fp = fopen('/tmp/pantry','w') or die ("Can't open pantry");
fputs($fp,serialize($pantry));
fclose($fp);
</pre>
</div>

<p>
To recreate the variables, use unserialize():
</p>

<div class="org-src-container">
<pre class="src src-php">$new_pantry = unserialize(file_get_contents('/tmp/pantry'));
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2335cc0" class="outline-2">
<h2 id="org2335cc0">functions</h2>
<div class="outline-text-2" id="text-org2335cc0">
</div><div id="outline-container-org328de91" class="outline-3">
<h3 id="org328de91">checking for a function's existence</h3>
<div class="outline-text-3" id="text-org328de91">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
if (function_exists("array_combine"))
{
    echo "Function exists";
}
else
{
    echo "Function does not exist - better write our own";
}
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org938cc6c" class="outline-3">
<h3 id="org938cc6c">Creating Functions That Take a Variable Number of Arguments</h3>
<div class="outline-text-3" id="text-org938cc6c">
<p>
use <code>func_num_args()</code> and <code>func_get_arg()</code> functions.
</p>

<div class="org-src-container">
<pre class="src src-php">// find the "average" of a group of numbers
function mean() {
    // initialize to avoid warnings
    $sum = 0;

    // the number of arguments passed to the function
    $size = func_num_args();

    // iterate through the arguments and add up the numbers
    for ($i = 0; $i &lt; $size; $i++) {
        $sum += func_get_arg($i);
    }

    // divide by the amount of numbers
    $average = $sum / $size;

    // return average
    return $average;
}

$mean = mean(96, 93, 97);
</pre>
</div>

<p>
There is a third version of this function that uses func<sub>num</sub><sub>args</sub>( ) to return
an array containing all the values passed to the function.
</p>

<div class="org-src-container">
<pre class="src src-php">// find the "average" of a group of numbers
function mean() {
    // initialize to avoid warnings
    $sum = 0;

    // load the arguments into $numbers
    $numbers = func_get_args();

    // the number of elements in the array
    $size = count($numbers);

    // iterate through the array and add up the numbers
    for ($i = 0; $i &lt; $size; $i++) {
        $sum += $numbers[$i];
    }

    // divide by the amount of numbers
    $average = $sum / $size;

    // return average
    return $average;
}

$mean = mean(96, 93, 97);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org899a838" class="outline-2">
<h2 id="org899a838">Misc</h2>
<div class="outline-text-2" id="text-org899a838">
</div><div id="outline-container-orgb96f420" class="outline-3">
<h3 id="orgb96f420">get results from eval</h3>
<div class="outline-text-3" id="text-orgb96f420">
<p>
use  <code>return</code> eg:
</p>

<div class="org-src-container">
<pre class="src src-php">$res = eval('return 2 + 3;');      // 5
</pre>
</div>
</div>
</div>

<div id="outline-container-org59d9e2a" class="outline-3">
<h3 id="org59d9e2a">check if a class has a property</h3>
<div class="outline-text-3" id="text-org59d9e2a">
<div class="org-src-container">
<pre class="src src-php">bool property_exists ( mixed $class , string $property )
</pre>
</div>

<p>
This function checks if the given property exists in the specified class.
</p>

<p>
Note:
As opposed with isset(), property<sub>exists</sub>() returns TRUE even if the property has the value NULL.
</p>

<p>
Returns TRUE if the property exists, FALSE if it doesn't exist or NULL in case of an error.
</p>
</div>
</div>

<div id="outline-container-org6f92338" class="outline-3">
<h3 id="org6f92338">redirecting</h3>
<div class="outline-text-3" id="text-org6f92338">
<p>
When redirecting to some scripts, the redirection also passes on the
entire QUERY<sub>STRING</sub> the query string is stored in the PHP
environment variable $QUERY<sub>STRING</sub> as a GET method parameter. In
addition, a session variable, referer, is registered in selected cases
so that in later processing the script can redirect to the original
calling page.
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
if ($_POST[location] == "") {
   header("Location: http://127.0.0.1/redirect_form.html");
   exit;
} else {
   header("Location: $_POST[location]");
   exit;
}
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org9847af7" class="outline-3">
<h3 id="org9847af7">making the root path</h3>
<div class="outline-text-3" id="text-org9847af7">
<div class="org-src-container">
<pre class="src src-php">define("ROOT",realpath(dirname(__FILE__)));
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc80ab4f" class="outline-3">
<h3 id="orgc80ab4f">integer division</h3>
<div class="outline-text-3" id="text-orgc80ab4f">
<div class="org-src-container">
<pre class="src src-php">int intdiv ( int $dividend , int $divisor )
</pre>
</div>

<p>
Returns the integer quotient of the division of dividend by divisor.
</p>
</div>
</div>
</div>
<div id="outline-container-orgfbec5b2" class="outline-2">
<h2 id="orgfbec5b2">json</h2>
<div class="outline-text-2" id="text-orgfbec5b2">
</div><div id="outline-container-orge078d2c" class="outline-3">
<h3 id="orge078d2c">json encode raw UTF?</h3>
<div class="outline-text-3" id="text-orge078d2c">
<div class="org-src-container">
<pre class="src src-php">json_encode( $text, JSON_UNESCAPED_UNICODE );
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge22dc73" class="outline-2">
<h2 id="orge22dc73">webservice</h2>
<div class="outline-text-2" id="text-orge22dc73">
</div><div id="outline-container-org897a489" class="outline-3">
<h3 id="org897a489">types of webservices</h3>
<div class="outline-text-3" id="text-org897a489">
</div><div id="outline-container-org4f543f1" class="outline-4">
<h4 id="org4f543f1">SOAP</h4>
<div class="outline-text-4" id="text-org4f543f1">
<p>
SOAP is an acronym for Simple Object Access Protocol.
</p>

<p>
SOAP is a XML-based protocol for accessing web services.
</p>

<p>
SOAP is a W3C recommendation for communication between applications.
</p>

<p>
SOAP is XML based, so it is platform independent and language
independent. In other words, it can be used with Java, .Net or PHP
language on any platform.
</p>
</div>
</div>

<div id="outline-container-org7b20449" class="outline-4">
<h4 id="org7b20449">WSDL</h4>
<div class="outline-text-4" id="text-org7b20449">
<p>
WSDL is an acronym for Web Services Description Language.
</p>

<p>
WSDL is a xml document containing information about web services such
as method name, method parameter and how to access it.
</p>

<p>
WSDL is a part of UDDI. It acts as a interface between web service applications.
</p>

<p>
WSDL is pronounced as wiz-dull.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org34d290e" class="outline-2">
<h2 id="org34d290e">classes</h2>
<div class="outline-text-2" id="text-org34d290e">
</div><div id="outline-container-org40be2c5" class="outline-3">
<h3 id="org40be2c5">static attributes or methods.</h3>
<div class="outline-text-3" id="text-org40be2c5">
<p>
A static property is a class variable that is associated with the class, rather than with an
instance of the class.
</p>

<p>
Static properties are declared with the static keyword and are
accessed via the syntax ClassName::$property .The following example illustrates
how static properties work:
</p>

<div class="org-src-container">
<pre class="src src-php">class TestClass {
   public static $counter;
}
$counter = TestClass::$counter;
</pre>
</div>

<p>
If you need to access a static property inside a class, you can also use the magic keywords
self and parent , which resolve to the current class and the parent of the current class.
</p>

<div class="org-src-container">
<pre class="src src-php">class TestClass {
   public static $counter = 0;
      public $id;
   public function _ _construct()
   {
      $this-&gt;id = self::$counter++;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf591b4" class="outline-3">
<h3 id="orgaf591b4">_<sub>clone</sub> magic method</h3>
<div class="outline-text-3" id="text-orgaf591b4">
<p>
To actually copy an object in PHP5, you need to use the built-in _ _ clone()
method.
</p>

<div class="org-src-container">
<pre class="src src-php">$obj = new TestClass;
$copy = $obj-&gt;_ _clone();
</pre>
</div>

<p>
For some classes, the built-in deep-copy _ _clone() method may not be adequate for
your needs, so PHP allows you to override it. Inside the _ _clone() method, you not
only have $this , which represents the new object, but also $that , which is the object
being cloned. For example, in the TestClass class defined previously in this chapter, if
you use the default _ _clone() method, you will copy its id property. Instead, you
should rewrite the class as follows:
</p>

<div class="org-src-container">
<pre class="src src-php">class TestClass {
   public static $counter = 0;
   public $id;
   public $other;
   public function _ _construct()
   {
      $this-&gt;id = self::$counter++;
   }
   public function _ _clone()
   {
      $this-&gt;other = $that-&gt;other;
      $this-&gt;id = self::$counter++;
   }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd417cc1" class="outline-3">
<h3 id="orgd417cc1">passing objects as function parameters.</h3>
<div class="outline-text-3" id="text-orgd417cc1">
<p>
objects are always passed by reference. This means that when you pass an object
into a function, the function operates on that same object, and if it is changed
inside the function, that change is reflected outside.
</p>
</div>
</div>
<div id="outline-container-org01a64ba" class="outline-3">
<h3 id="org01a64ba">Using Magic _<sub>get</sub> and _<sub>set</sub> Methods</h3>
<div class="outline-text-3" id="text-org01a64ba">
<p>
These are called when you access a property that doesn’t exist.
</p>

<div class="org-src-container">
<pre class="src src-php">class Courier
{
  protected $data = array();
  public function __get($property) {
    return $this-&gt;data[$property];
  }
  public function __set($property, $value) {
    $this-&gt;data[$property] = $value;
    return true;
  }
}

$courier = new Courier();
$courier-&gt;name = 'Avian Carrier';
echo $courier-&gt;name;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb469da" class="outline-3">
<h3 id="orgcb469da">counting objects</h3>
<div class="outline-text-3" id="text-orgcb469da">
<p>
By default, if you count() an object in PHP, you’ll receive a count of how many
properties it has. However, by implementing the Countable interface as shown below
allows us to hook into this.
</p>

<div class="org-src-container">
<pre class="src src-php">class Courier implements Countable
{
  protected $count = 0;
  public function ship(Parcel $parcel) {
    $this-&gt;count++;
    // ship parcel
    return true;
  }
  public function count() {
    return $this-&gt;count;
  }
}

$courier = new Courier();
$courier-&gt;ship(new Parcel());
$courier-&gt;ship(new Parcel());
$courier-&gt;ship(new Parcel());
echo count($courier); // outputs 3
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd8ace90" class="outline-3">
<h3 id="orgd8ace90">Using _<sub>call</sub>() and _<sub>callStatic</sub>()</h3>
<div class="outline-text-3" id="text-orgd8ace90">
<p>
When we call a method that isn’t declared in the class, the _<sub>call</sub>() method is
called instead.
</p>

<div class="org-src-container">
<pre class="src src-php">class Courier {
  public $name;
  public function __construct($name) {
    $this-&gt;name = $name;
    return true;
  }

  public function ship($parcel) {
    // sends the parcel to its destination
    return true;
  }

  public function __call($name, $params) {
    if($name == 'sendParcel') {
      // legacy system requirement, pass to newer send() method
      return $this-&gt;send($params[0]);
    } else {
      error_log('Failed call to ' . $name . ' in Courier class');
    return false;
    }
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org19eb291" class="outline-3">
<h3 id="org19eb291">serializing</h3>
<div class="outline-text-3" id="text-org19eb291">
<p>
To serialize data in PHP means to convert it into a text-based format that we can
store, for example, in a database.
</p>
<div class="org-src-container">
<pre class="src src-php">$mycourier = new Courier('Avian Services', 'Australia');
var_dump($mycourier);
$s = serialize($mycourier);
</pre>
</div>

<p>
When we serialize an object, we can unserialize it in any system where the class
definition of the object is available. There are some object properties, however, that
we don’t want to serialize, because they’d be invalid in any other context. A good
example of this is a resource; a file pointer would make no sense if unserialized at
a later point, or on a totally different platform.
</p>

<p>
To help us deal with this situation, PHP provides the _<sub>sleep</sub>() and _<sub>wakeup</sub>()
methods, which are called when serializing and unserializing, respectively. These
methods allow us to name which properties to serialize, and fill in any that aren’t
stored when the object is “woken.”
</p>

<div class="org-src-container">
<pre class="src src-php">class Courier {
  public $name;
  public $home_country;

  public function __construct($name, $home_country) {
    $this-&gt;name = $name;
    $this-&gt;home_country = $home_country;
    $this-&gt;logfile = $this-&gt;getLogFile();
    return true;
  }
  protected function getLogFile() {
      // error log location would be in a config file
      return fopen('/tmp/error_log.txt', 'a');
  }
  public function log($message) {
    if($this-&gt;logfile) {
      fputs($this-&gt;logfile, 'Log message: ' . $message . "\n");
    }
  }
  public function __sleep() {
    // only store the "safe" properties
    return array("name", "home_country");
  }
  public function __wakeup() {
    // properties are restored, now add the logfile
    $this-&gt;logfile = $this-&gt;getLogFile();
    return true;
  }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org066d417" class="outline-2">
<h2 id="org066d417">reflection</h2>
<div class="outline-text-2" id="text-org066d417">
</div><div id="outline-container-org851fd45" class="outline-3">
<h3 id="org851fd45">retrieving the name of current function?</h3>
<div class="outline-text-3" id="text-org851fd45">
<p>
_<sub>FUNCTION</sub>__ returns only the name of the function.
while as <span class="underline"><span class="underline">METHOD</span></span> returns the name of the class alongwith the name of the function.
</p>

<div class="org-src-container">
<pre class="src src-php">class foo
{
  function print_func()
  {
            echo __FUNCTION__;
  }
  function print_method()
  {
            echo __METHOD__;
  }
}

$obj = new foo();
$obj-&gt;print_func();      // Returns: print_func
$obj-&gt;print_method();    // Returns: foo::print_method
</pre>
</div>
<p>
<a href="http://www.php.net/manual/en/language.constants.predefined.php">http://www.php.net/manual/en/language.constants.predefined.php</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org80eacec" class="outline-2">
<h2 id="org80eacec">Debug</h2>
<div class="outline-text-2" id="text-org80eacec">
</div><div id="outline-container-orgdcea580" class="outline-3">
<h3 id="orgdcea580">dump all variables?</h3>
<div class="outline-text-3" id="text-orgdcea580">
<p>
Use get<sub>defined</sub><sub>vars</sub> and/or get<sub>defined</sub><sub>constants</sub>
</p>

<div class="org-src-container">
<pre class="src src-php">$arr = get_defined_vars();
print_r($arr);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php">$a = print_r(var_dump($GLOBALS),1);
echo htmlspecialchars($a);
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b586a0" class="outline-3">
<h3 id="org6b586a0">send an error message to  the web server's error log or to a file.</h3>
<div class="outline-text-3" id="text-org6b586a0">
<div class="org-src-container">
<pre class="src src-php">bool error_log ( string $message [, int $message_type = 0 [, string $destination [, string $extra_headers ]]] )
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// Send notification through the server log if we can not
// connect to the database.
if (!Ora_Logon($username, $password)) {
    error_log("Oracle database not available!", 0);
}

// Notify administrator by email if we run out of FOO
if (!($foo = allocate_new_foo())) {
    error_log("Big trouble, we're all out of FOOs!", 1,
               "operator@example.com");
}

// another way to call error_log():
error_log("You messed up!", 3, "/var/tmp/my-errors.log");
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org61052c4" class="outline-3">
<h3 id="org61052c4">enabling error reporting</h3>
<div class="outline-text-3" id="text-org61052c4">
<div class="org-src-container">
<pre class="src src-php">error_reporting(E_ALL);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org54063d2" class="outline-2">
<h2 id="org54063d2">exceptions</h2>
<div class="outline-text-2" id="text-org54063d2">
</div><div id="outline-container-orgbd8629a" class="outline-3">
<h3 id="orgbd8629a">Throwing Exceptions</h3>
<div class="outline-text-3" id="text-orgbd8629a">
<div class="org-src-container">
<pre class="src src-php">// something has gone wrong
throw new Exception('Meaningful error message string');
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc2c2710" class="outline-3">
<h3 id="orgc2c2710">Extending Exceptions</h3>
<div class="outline-text-3" id="text-orgc2c2710">
<div class="org-src-container">
<pre class="src src-php">class HeavyParcelException extends Exception {}
</pre>
</div>
<p>
We can set any properties or add any methods we desire to this Exception class.
</p>
</div>
</div>

<div id="outline-container-org96e0edd" class="outline-3">
<h3 id="org96e0edd">Setting a Global Exception Handler</h3>
<div class="outline-text-3" id="text-org96e0edd">
<p>
To avoid seeing fatal errors where exceptions have been thrown and our code failed
to catch them, we can set a default behavior for our application in this situation.
To do this, we use a function called set<sub>exception</sub><sub>handler</sub>() . This accepts a
callback as its parameter, so we can give the name of a function to use, for example.
An exception handler will usually present an error screen to the user—much nicer
than a fatal error message!
</p>

<div class="org-src-container">
<pre class="src src-php">A basic exception handler would look similar to this:
function handleMissedException($e) {
echo "Sorry, something is wrong. Please try again, or contact us if the problem persists";
error_log('Unhandled Exception: ' . $e-&gt;getMessage()
. ' in file ' . $e-&gt;getFile() . ' on line ' . $e-&gt;getLine());
}
set_exception_handler('handleMissedException');
throw new Exception('just testing!');
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcecdbc5" class="outline-2">
<h2 id="orgcecdbc5">patterns</h2>
<div class="outline-text-2" id="text-orgcecdbc5">
</div><div id="outline-container-orgd47f4df" class="outline-3">
<h3 id="orgd47f4df">value object pattern</h3>
<div class="outline-text-3" id="text-orgd47f4df">
<p>
<b>The Problem</b>
So, how do you implement a lightweight, or easy to construct, descriptive object like Date or Dollar?
</p>

<p>
<b>The Solution</b>
Lightweight objects should behave like PHP integers: if you assign the same object to two different
variables and then change one of the variables, the other variable should remain unaffected.
</p>

<div class="org-src-container">
<pre class="src src-php">class Dollar {
   protected $amount;
   public function __construct($amount=0) {
     $this-&gt;amount = (float)$amount;
   }
   public function getAmount() {
      return $this-&gt;amount;
   }
   public function add($dollar) {
      return new Dollar($this-&gt;amount + $dollar-&gt;getAmount());
   }
}
</pre>
</div>

<p>
The fundamentals of the ValueObject pattern in PHP 5 are:
</p>
<ol class="org-ol">
<li>Protect the attributes of a Value Object so direct access is forbidden.</li>
<li>Set the object’s attributes in the constructor.</li>
<li>Provide no “setter” functions, which otherwise allow attributes to be altered.</li>
</ol>
</div>
</div>
<div id="outline-container-org6ed13a0" class="outline-3">
<h3 id="org6ed13a0">The factory pattern</h3>
<div class="outline-text-3" id="text-org6ed13a0">
<p>
<b>The Problem</b>
How can you create such “complex” objects easily and conveniently—without cut-and-paste pro-
gramming?
</p>

<p>
<b>The Solution</b>
Create a “factory”—a function or a class method— to “manufacture” new objects.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb166ce9" class="outline-2">
<h2 id="orgb166ce9">files</h2>
<div class="outline-text-2" id="text-orgb166ce9">
</div><div id="outline-container-org729cc9e" class="outline-3">
<h3 id="org729cc9e">Reading Entire files</h3>
<div class="outline-text-3" id="text-org729cc9e">
<p>
To read the contents of a file into a string, use <code>file_get_contents()</code>. Pass it a file‐
name, and it returns a string containing everything in the file.
</p>
</div>
</div>

<div id="outline-container-org54f2d0b" class="outline-3">
<h3 id="org54f2d0b">Writing Entire file</h3>
<div class="outline-text-3" id="text-org54f2d0b">
<p>
use <code>file_put_contents()</code>.
</p>
<div class="org-src-container">
<pre class="src src-php">// Write the results to page.html
file_put_contents('page.html', $page);
</pre>
</div>
</div>
</div>

<div id="outline-container-orga266250" class="outline-3">
<h3 id="orga266250">Reading and writing parts of files</h3>
<div class="outline-text-3" id="text-orga266250">
<p>
use <code>file()</code> function to access each line of file.
<code>file()</code> reads the whole file into an array and it is not good for large files.
</p>
<div class="org-src-container">
<pre class="src src-php">foreach (file('people.txt') as $line) {
  $line = trim($line);
  $info = explode('|', $line);
  print '&lt;li&gt;&lt;a href="mailto:' . $info[0] . '"&gt;' . $info[1] ."&lt;/li&gt;\n";
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge457a8b" class="outline-3">
<h3 id="orge457a8b">reading a file one line at a time</h3>
<div class="outline-text-3" id="text-orge457a8b">
<div class="org-src-container">
<pre class="src src-php">$fh = fopen('people.txt','rb');
while ((! feof($fh)) &amp;&amp; ($line = fgets($fh))) {
  $line = trim($line);  // fgets() includes the trailing newline at the end of line.
  $info = explode('|', $line);
  print '&lt;li&gt;&lt;a href="mailto:' . $info[0] . '"&gt;' . $info[1] ."&lt;/li&gt;\n";
}
fclose($fh);
</pre>
</div>
</div>
</div>

<div id="outline-container-org39e396b" class="outline-3">
<h3 id="org39e396b">Inserting CSV data into a database table</h3>
<div class="outline-text-3" id="text-org39e396b">
<div class="org-src-container">
<pre class="src src-php">try {
  $db = new PDO('sqlite:/tmp/restaurant.db');
} catch (Exception $e) {
  print "Couldn't connect to database: " . $e-&gt;getMessage();
  exit();
}
$fh = fopen('dishes.csv','rb');
$stmt = $db-&gt;prepare('INSERT INTO dishes (dish_name, price, is_spicy) VALUES (?,?,?)');

while ((! feof($fh)) &amp;&amp; ($info = fgetcsv($fh))) {
  // $info[0] is the dish name (the first field in a line of dishes.csv)
  // $info[1] is the price (the second field)
  // $info[2] is the spicy status (the third field)
  // Insert a row into the database table
  $stmt-&gt;execute($info);
  print "Inserted $info[0]\n";
}
// Close the file
fclose($fh);
</pre>
</div>
</div>
</div>

<div id="outline-container-org44ad95d" class="outline-3">
<h3 id="org44ad95d">Writing CSV-formatted data to a file</h3>
<div class="outline-text-3" id="text-org44ad95d">
<div class="org-src-container">
<pre class="src src-php">try {
  $db = new PDO('sqlite:/tmp/restaurant.db');
} catch (Exception $e) {
  print "Couldn't connect to database: " . $e-&gt;getMessage();
  exit();
}
// Open the CSV file for writing
$fh = fopen('dish-list.csv','wb');
$dishes = $db-&gt;query('SELECT dish_name, price, is_spicy FROM dishes');
while ($row = $dishes-&gt;fetch(PDO::FETCH_NUM)) {
    // Write the data in $row as a CSV-formatted string. fputcsv()
    // adds a newline at the end.
  fputcsv($fh, $row);
}
fclose($fh);
</pre>
</div>
</div>
</div>

<div id="outline-container-org14187b7" class="outline-3">
<h3 id="org14187b7">changing the page type of CSV</h3>
<div class="outline-text-3" id="text-org14187b7">
<div class="org-src-container">
<pre class="src src-php">// Tell the web client to expect a CSV file
header('Content-Type: text/csv');
// Tell the web client to view the CSV file in a separate program
header('Content-Disposition: attachment; filename="dishes.csv"');
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org74bbb36" class="outline-2">
<h2 id="org74bbb36">lumen</h2>
<div class="outline-text-2" id="text-org74bbb36">
</div><div id="outline-container-org156e249" class="outline-3">
<h3 id="org156e249">lumen on apache</h3>
<div class="outline-text-3" id="text-org156e249">
<p>
install a lumen app in <b>/var/www</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">$ lumen new cms.app
</pre>
</div>

<p>
make your storage folder writable
</p>
<div class="org-src-container">
<pre class="src src-shell">$ sudo chmod -R 777 storage
</pre>
</div>

<p>
create a virtual host file
</p>
<div class="org-src-container">
<pre class="src src-shell">$ cp /ect/apache2/sites-available/000-default.conf /etc/apache2/sites-available/cms.conf
</pre>
</div>

<p>
here we use a different port for listening incoming requests for this <b>VirtualHost</b>:
</p>

<pre class="example">
&lt;VirtualHost *:8081&gt;
#...
DocunemtRoot /var/www/cms.app/public
&lt;Directory /var/www/cms.app/public&gt;
   AllowOverride all
   # other options
&lt;/Directory&gt;
#...
&lt;/VirtualHost&gt;
</pre>

<p>
change <b>ports.conf</b> to listen to port 8081 by adding <b>Listen 8081</b> 
to <b>/etc/apache2/ports.conf</b> file.
</p>

<p>
now we have to make the <b>VirtualHost</b> active by running <b>a2ensite</b>.
</p>
<div class="org-src-container">
<pre class="src src-shell">$ sudo a2ensite cms.conf
</pre>
</div>

<p>
restart the service for the new settings to take effect.
</p>
<div class="org-src-container">
<pre class="src src-shell">$ sudo service apache2 restart
</pre>
</div>

<p>
<a href="https://httpd.apache.org/docs/2.4/vhosts/examples.html">https://httpd.apache.org/docs/2.4/vhosts/examples.html</a>
<a href="https://gist.github.com/dbaeck/89d0b52d9d3d2777a96f">https://gist.github.com/dbaeck/89d0b52d9d3d2777a96f</a>
<a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-ubuntu-14-04-lts">https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-ubuntu-14-04-lts</a>
<a href="https://www.digitalocean.com/community/questions/what-is-the-correct-folder-to-put-my-website-files-var-www-or-var-www-html">https://www.digitalocean.com/community/questions/what-is-the-correct-folder-to-put-my-website-files-var-www-or-var-www-html</a>
<a href="http://tecadmin.net/install-laravel-framework-on-ubuntu/">http://tecadmin.net/install-laravel-framework-on-ubuntu/</a>
</p>
</div>
</div>
<div id="outline-container-orgb51961f" class="outline-3">
<h3 id="orgb51961f">installing globally</h3>
<div class="outline-text-3" id="text-orgb51961f">
<p>
install the lumen-intaller
</p>
<div class="org-src-container">
<pre class="src src-shell">$ composer global require "laravel/lumen-installer"
</pre>
</div>

<p>
add the lumen binary to path. It can be found at:
</p>

<ul class="org-ul">
<li><b>~/.composer/vendor/bin</b></li>
<li><b>~/.config/composer/vendor/bin</b></li>
</ul>

<p>
call like this <code>$ lumen new blog</code> .
</p>
</div>
</div>

<div id="outline-container-org393fec9" class="outline-3">
<h3 id="org393fec9">PHP dependencies</h3>
<div class="outline-text-3" id="text-org393fec9">
<div class="org-src-container">
<pre class="src src-shell">$ sudo apt-get install php7.0-zip
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf85306e" class="outline-3">
<h3 id="orgf85306e">artisan</h3>
<div class="outline-text-3" id="text-orgf85306e">
</div><div id="outline-container-orge9b8f57" class="outline-4">
<h4 id="orge9b8f57">create a migration</h4>
<div class="outline-text-4" id="text-orge9b8f57">
<p>
php artisan make:migration create<sub>books</sub><sub>table</sub> &#x2013;create=books
</p>
</div>
</div>

<div id="outline-container-orgb4fcc12" class="outline-4">
<h4 id="orgb4fcc12">commit migration to db</h4>
<div class="outline-text-4" id="text-orgb4fcc12">
<p>
php artisan migrate
</p>
</div>
</div>

<div id="outline-container-orgba76ae5" class="outline-4">
<h4 id="orgba76ae5">Refreshing the Schema and Seeding the Database</h4>
<div class="outline-text-4" id="text-orgba76ae5">
<p>
$ composer dump-autoload
$ php artisan migrate:refresh
$ php artisan db:seed
</p>
</div>
</div>
</div>

<div id="outline-container-org45a330c" class="outline-3">
<h3 id="org45a330c">middleware</h3>
<div class="outline-text-3" id="text-org45a330c">
<p>
Middleware provides a way to filter
incoming HTTP requests before a defined route handles the request. You can use middleware to do any
number of things, like authentication, validating a signed request, and CORS support, to name a few.
Middleware classes are typically created in the app/Http/Middleware path by convention
</p>
</div>
</div>
</div>

<div id="outline-container-orgd0e4ecf" class="outline-2">
<h2 id="orgd0e4ecf">elqoquent</h2>
<div class="outline-text-2" id="text-orgd0e4ecf">
</div><div id="outline-container-orgefff6f2" class="outline-3">
<h3 id="orgefff6f2">eloquent postgres json type</h3>
<div class="outline-text-3" id="text-orgefff6f2">
<p>
In your migrations you can do something like:
</p>
<div class="org-src-container">
<pre class="src src-php">$table-&gt;json('field_name');
</pre>
</div>

<p>
And in you model cast it to JSON by adding the $casts property like so:
</p>
<div class="org-src-container">
<pre class="src src-php">class SomeModel extends Model
{
    protected $casts = [
        'field_name' =&gt; 'json'
    ];
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org77ba132" class="outline-2">
<h2 id="org77ba132">installation</h2>
<div class="outline-text-2" id="text-org77ba132">
</div><div id="outline-container-orga23d3dc" class="outline-3">
<h3 id="orga23d3dc">php packages</h3>
<div class="outline-text-3" id="text-orga23d3dc">
<div class="org-src-container">
<pre class="src src-shell">$ sudo apt-get install libapache2-mod-php    # for running php in apache2
</pre>
</div>
</div>
</div>

<div id="outline-container-org3588c10" class="outline-3">
<h3 id="org3588c10">phpstorm xdebug</h3>
<div class="outline-text-3" id="text-org3588c10">
<div class="org-src-container">
<pre class="src src-shell">$ sudo apt-get install php-xdebug
</pre>
</div>

<p>
to enable for php storm add <code>xdebug.remote_enable=1</code> to <code>php.ini</code>.
</p>

<p>
<a href="https://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm">https://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm</a>
<a href="https://www.jetbrains.com/phpstorm/marklets/">https://www.jetbrains.com/phpstorm/marklets/</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org970eb4f" class="outline-2">
<h2 id="org970eb4f">session handling</h2>
<div class="outline-text-2" id="text-org970eb4f">
</div><div id="outline-container-orgd0bbc5b" class="outline-3">
<h3 id="orgd0bbc5b">starting a session</h3>
<div class="outline-text-3" id="text-orgd0bbc5b">
<p>
You may start a session manually with session<sub>start</sub>, or you can
configure PHP to automatically start sessions with the
session.auto<sub>start</sub> directive in php.ini.
</p>

<div class="org-src-container">
<pre class="src src-php">session_start() !== false or die('could not start session');
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ae58e0" class="outline-3">
<h3 id="org3ae58e0">session variables example</h3>
<div class="outline-text-3" id="text-org3ae58e0">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
    //start session
    session_start();

    //initialize a set of session variables
    if(!isset($_SESSION['a']))
    {
        print("Initializing Session&lt;br&gt;");

        $_SESSION['a'] = 'Session Var A';
        $_SESSION['b'] = 123.45;
        $_SESSION['c'] = 0;
    }

    //update session with access count
    $_SESSION['c']++;

    print("Access count: " . $_SESSION['c'] . "&lt;br&gt;");

    print("Session Dump: " . session_encode() . "&lt;br&gt;");
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2dc315" class="outline-3">
<h3 id="orgb2dc315">custom session handler</h3>
<div class="outline-text-3" id="text-orgb2dc315">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
    class mySession
    {
        //prefix with which to mark session files
        var $mark;

        //path for storing session files
        var $path;

        //name of session cookie
        var $name;

        function mySession($mark='mySession_')
        {
            $this-&gt;mark = $mark;
        }

        function getFilePath($id)
        {
            return($this-&gt;path . '/' . $this-&gt;mark . $id);
        }

        function open($path, $name)
        {
            $this-&gt;path = $path;
            $this-&gt;name = $name;

            return(TRUE);
        }

        function close()
        {
            return(TRUE);
        }

        function read($id)
        {
            if($fp = @fopen(getFilePath($id), "r"))
            {
                return(fread($fp,
                       filesize($this-&gt;getFilePath($id))));
            }
            else
            {
                return("");
            }
        }

        function write($id, $data)
        {
            if($fp = @fopen($this-&gt;getFilePath($id), "w"))
            {
                return(fwrite($fp, $data));
            }
            else
            {
                return(FALSE);
            }
        }

        function destroy($id)
        {
            return(@unlink($this-&gt;getFilePath($id)));
        }

        function garbage($lifetime)
        {
            $d = dir($this-&gt;path);

            while($f = $d-&gt;read())
            {
                //file begins with mark and it's too old
                if((strpos($f, $this-&gt;mark) == 0) AND
                    (time() &gt; (fileatime($f) + $lifetime)))
                {
                    unlink("$this-&gt;path/$f");
                }

            }
            $d-&gt;close();
            return(TRUE);
        }
    }

    $s = new mySession();

    session_set_save_handler(
        array($s, 'open'),
        array($s, 'close'),
        array($s, 'read'),
        array($s, 'write'),
        array($s, 'destroy'),
        array($s, 'garbage')
        );

    //start session
    session_start();

    //initialize a set of session variables
    if(!isset($_SESSION['a']))
    {
        print("Initializing Session&lt;br&gt;");

        $_SESSION['a'] = 'Session Var A';
        $_SESSION['b'] = 123.45;
        $_SESSION['c'] = 0;
    }

    //update session with access count
    $_SESSION['c']++;

    print("Access count: " . $_SESSION['c'] . "&lt;br&gt;");

    print("Session Dump: " . session_encode() . "&lt;br&gt;");
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9e0ddf" class="outline-3">
<h3 id="orgc9e0ddf">ending a session</h3>
<div class="outline-text-3" id="text-orgc9e0ddf">
<p>
use <code>session_destroy()</code> function.  
</p>

<p>
Keep in mind that ending a session
doesn't make the values from that session unavailable to the rest of
the currently executing PHP page.
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
session_start();
// Do some miscellaneous work
$_SESSION['username'] = 'Michele';
// Logout of the site
session_destroy();
echo "At this point we can still see the value of username as
".$_SESSION['username']."&lt;br /&gt;";
$_SESSION = array();
echo "Now the value of username is blank: ".$_SESSION['username'];
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a5fa41" class="outline-3">
<h3 id="org5a5fa41">Exposed Session Data</h3>
<div class="outline-text-3" id="text-org5a5fa41">
<div class="org-src-container">
<pre class="src src-php">#!/usr/bin/env php
&lt;?php

    header('Content-Type: text/plain');
    session_start();

    $path = ini_get('session.save_path');
    $handle = dir($path);

    while ($filename = $handle-&gt;read())
    {
      if (substr($filename, 0, 5) == 'sess_')
      {
        $data = file_get_contents("$path/$filename");

        if (!empty($data))
        {
          session_decode($data);
          $session = $_SESSION;
          $_SESSION = array();
          echo "Session [" . substr($filename, 5) . "]\n";
          print_r($session);
          echo "\n--\n\n";
        }
      }
    }

?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd08d825" class="outline-3">
<h3 id="orgd08d825">making sure session data is not lost after redirect</h3>
<div class="outline-text-3" id="text-orgd08d825">
<p>
call <code>exit()</code> after redirect.
use <code>session_write_close()</code>
</p>
</div>
</div>
<div id="outline-container-org6fb21d6" class="outline-3">
<h3 id="org6fb21d6">check for session status</h3>
<div class="outline-text-3" id="text-org6fb21d6">
<div class="org-src-container">
<pre class="src src-php">function is_session_started()
{
    if ( php_sapi_name() !== 'cli' ) {
        if ( version_compare(phpversion(), '5.4.0', '&gt;=') ) {
            return session_status() === PHP_SESSION_ACTIVE ? TRUE : FALSE;
        } else {
            return session_id() === '' ? FALSE : TRUE;
        }
    }
    return FALSE;
}

// Example
if ( is_session_started() === FALSE ) session_start();
?&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1345619" class="outline-2">
<h2 id="org1345619">SPL</h2>
<div class="outline-text-2" id="text-org1345619">
</div><div id="outline-container-org88e5223" class="outline-3">
<h3 id="org88e5223">Available objects in SPL</h3>
<div class="outline-text-3" id="text-org88e5223">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
foreach(spl_classes() as  $k=&gt;$v){
    echo nl2br($v."\n");
}
?&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5e49c98" class="outline-2">
<h2 id="org5e49c98">using <code>include_path</code> to manage larget projects</h2>
<div class="outline-text-2" id="text-org5e49c98">
<p>
You can add include<sub>path</sub> configuration option in the php.ini file. You
can use include<sub>path</sub> to define a list of directories that will be
searched when include() type functions specify relative
paths. Directories should be separated by colons (semicolons on
Windows platforms), as shown here:
</p>

<pre class="example">
include_path=".:/home/mary/php_lib:/usr/local/lib/php"
</pre>

<p>
if you don't have access to php.ini file you can set the include<sub>path</sub> option in .htaccess file:
</p>

<pre class="example">
php_value include_path /home/mary/php_lib
</pre>

<p>
you could also use the ini<sub>set</sub>() function to set the option at runtime:
</p>
<div class="org-src-container">
<pre class="src src-php">ini_set("include_path", "/home/mary/php_lib");
</pre>
</div>

<p>
As of PHP 4.3, she can use the set<sub>include</sub><sub>path</sub>() function to achieve the same effect, like so:
</p>

<div class="org-src-container">
<pre class="src src-php">set_include_path( "/home/mary/php_lib" );
</pre>
</div>
</div>
</div>

<div id="outline-container-org28c85ef" class="outline-2">
<h2 id="org28c85ef">output buffering</h2>
<div class="outline-text-2" id="text-org28c85ef">
</div><div id="outline-container-org9245b85" class="outline-3">
<h3 id="org9245b85">intro</h3>
<div class="outline-text-3" id="text-org9245b85">
<p>
The idea of output buffering is to store all the content that has to
be outputted in a memory buffer before outputting the whole
buffer. This has the following advantages: 
</p>
<ul class="org-ul">
<li>I/O operations are reducedto one which is a great performance improvement</li>
<li>Content can be manipulated and parsed before outputting it to the browser</li>
<li>The I/O operation can be done sequentially and quickly</li>
</ul>

<p>
The downside to this is that the client has to wait until the script
completes. Therefore, depending on the application design and the
script execution time, the user might come to the conclusion that the
system crashed and they will close the browser or do something else
that would not be quite what we want.
</p>
</div>
</div>

<div id="outline-container-org53612b1" class="outline-3">
<h3 id="org53612b1">detect if output buffering is turned on?</h3>
<div class="outline-text-3" id="text-org53612b1">
<div class="org-src-container">
<pre class="src src-php">if(ob_get_level() &gt; 0){
   //there are some buffers active.
}

$ php -d output_buffering=1 -r'var_dump(ob_get_level());'
int(1)
$ php -d output_buffering=0 -r'var_dump(ob_get_level());'
int(0)
</pre>
</div>

<p>
It does however check whether there is an output buffer active, not
what the actual setting of PHP itself is. A manual ob<sub>start</sub>() (or more
then one) will also increase the level.
</p>
</div>
</div>

<div id="outline-container-orgc86ecc7" class="outline-3">
<h3 id="orgc86ecc7">example</h3>
<div class="outline-text-3" id="text-orgc86ecc7">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
ob_start();

echo("This is a test\n");
echo("More content\n");

ob_end_flush();
?&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8c85e6b" class="outline-2">
<h2 id="org8c85e6b">request</h2>
<div class="outline-text-2" id="text-org8c85e6b">
</div><div id="outline-container-orga710ed7" class="outline-3">
<h3 id="orga710ed7">check if request is ajax?</h3>
<div class="outline-text-3" id="text-orga710ed7">
<div class="org-src-container">
<pre class="src src-php">function is_ajax() {
  return isset($_SERVER['HTTP_X_REQUESTED_WITH']) &amp;&amp; strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest';
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaa3897c" class="outline-2">
<h2 id="orgaa3897c">page generation time</h2>
<div class="outline-text-2" id="text-orgaa3897c">
</div><div id="outline-container-org06e3cc0" class="outline-3">
<h3 id="org06e3cc0">solution1</h3>
<div class="outline-text-3" id="text-org06e3cc0">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$start = $time;
?&gt;

&lt;?php
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$finish = $time;
$total_time = round(($finish - $start), 4);
echo 'Page generated in '.$total_time.' seconds.';
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a907d2" class="outline-3">
<h3 id="org4a907d2">solution2</h3>
<div class="outline-text-3" id="text-org4a907d2">
<div class="org-src-container">
<pre class="src src-php">function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$time_start = microtime_float();

// Sleep for a while
usleep(100);

$time_end = microtime_float();
$time = $time_end - $time_start;

echo "Did nothing in $time seconds\n";
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef84760" class="outline-3">
<h3 id="orgef84760">solution3</h3>
<div class="outline-text-3" id="text-orgef84760">
<p>
microtime() and REQUEST<sub>TIME</sub><sub>FLOAT</sub> (as of PHP 5.4.0)
</p>

<div class="org-src-container">
<pre class="src src-php">// Randomize sleeping time
 usleep(mt_rand(100, 10000));

// As of PHP 5.4.0, REQUEST_TIME_FLOAT is available in the $_SERVER superglobal array.
// It contains the timestamp of the start of the request with microsecond precision.
$time = microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];

echo "Did nothing in $time seconds\n";
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5b87999" class="outline-2">
<h2 id="org5b87999">autoloading</h2>
<div class="outline-text-2" id="text-org5b87999">
</div><div id="outline-container-orge8203aa" class="outline-3">
<h3 id="orge8203aa">intro</h3>
<div class="outline-text-3" id="text-orge8203aa">
<p>
Autoloading is when we tell PHP where to look for our class files when it needs
a class declaration that it’s yet to see.
</p>
</div>
</div>
</div>

<div id="outline-container-org1d7056b" class="outline-2">
<h2 id="org1d7056b">security</h2>
<div class="outline-text-2" id="text-org1d7056b">
</div><div id="outline-container-org6fcc233" class="outline-3">
<h3 id="org6fcc233">Cross-site scripting</h3>
<div class="outline-text-3" id="text-org6fcc233">
<p>
For cross-site scripting—commonly abbreviated as XSS—the attack vector targets
an area where a user-supplied variable is included in application output, but not
properly escaped. This allows an attacker to inject a client-side script of their choice
as part of that variable’s value.
Here’s an example of code vulnerable to this type of attack:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;form action=”&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;”&gt;
&lt;input type=”submit” value=”Submit” /&gt;
&lt;/form&gt;
</pre>
</div>

<p>
<b>fix</b>
Compared to the attack itself, the fix is surprisingly simple: escape output from PHP
code to prevent the attacker from being able to inject their code in the first place.
This looks like the following:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;form action=”&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;”&gt;
  &lt;input type=”submit” value=”Submit” /&gt;
&lt;/form&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf32b257" class="outline-3">
<h3 id="orgf32b257">Cross-site Request Forgery(CSRF)</h3>
<div class="outline-text-3" id="text-orgf32b257">
<p>
a Cross-site Request Forgery, often abbreviated to CSRF.
The purpose of this type of attack is to have a victim send an HTTP request to a
specific website, taking advantage of the victim’s established identity with that
website.
</p>

<p>
<b>fix</b>
</p>
<ul class="org-ul">
<li>Don't use GET for creation,modification or deletion.</li>
</ul>

<p>
the specification for the HTTP protocol, which states the following:"the
convention has been established that the GET and HEAD methods SHOULD NOT have
the significance of taking an action other than retrieval."
</p>

<ul class="org-ul">
<li>use CSRF token</li>
</ul>

<p>
This change(use of POST method) doesn’t preclude the possibility that an
attacker might duplicate this HTML on another website. When a victim submits the
form, the request will include their session cookie for the domain in the form
action.
</p>

<p>
To address this, you can take advantage that a normal user will view the
form before submitting it by including a field with a random value, known as a
nonce or CSRF token. The token will also be stored in the user’s session, and
compared to the form value when the form is submitted to confirm that the values
are identical. The modified script to output the form looks as follows:
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
session_start();
if ($_POST &amp;&amp; $_POST['token'] == $_SESSION['token']) {
  // process form submission
} else {
  $token = uniqid(rand(), true);
  $_SESSION['token'] = $token;
?&gt;
&lt;form method=”post” action=”http://example.com/oneclickpurchase.php”&gt;
&lt;input type=”hidden” name=”token” value=”&lt;?php echo $token; ?&gt;” /&gt;
&lt;input type=”hidden” name=”product_id” value=”12345” /&gt;
&lt;input type=”submit” value=”1-Click Purchase” /&gt;
&lt;/form&gt;
&lt;?php
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfac89a9" class="outline-2">
<h2 id="orgfac89a9">apache <code>.htaccess</code> sample configuration</h2>
<div class="outline-text-2" id="text-orgfac89a9">
<pre class="example">
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L,QSA]
</pre>

<p>
The script tells Apache that whenever an HTTP request arrives and if
no physical file (!-f) or path (!-d) or symbolic link (!-l) can be
found, it should transfer control to index.php
</p>
</div>
</div>
<div id="outline-container-org92c6690" class="outline-2">
<h2 id="org92c6690">turn off DNS prefetching from individual documents</h2>
<div class="outline-text-2" id="text-org92c6690">
<p>
You can also turn off DNS Prefetching from individual documents, using the
http-equiv attribute on the &lt;meta&gt; element, like this:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;meta http-equiv="x-dns-prefetch-control" content="off"&gt;
 &lt;!-- turns on dns prefetching --&gt;
&lt;meta http-equiv="x-dns-prefetch-control" content="off"&gt;
&lt;!-- force the lookup of specific hostnames --&gt;
&lt;link rel="dns-prefetch" href="http://www.spreadfirefox.com/"&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbc5c56" class="outline-2">
<h2 id="orgdbc5c56">disable caching for a website</h2>
<div class="outline-text-2" id="text-orgdbc5c56">
<div class="org-src-container">
<pre class="src src-html">&lt;meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /&gt;
&lt;meta http-equiv="Pragma" content="no-cache" /&gt;
&lt;meta http-equiv="Expires" content="0" /&gt;
</pre>
</div>

<p>
<a href="http://live.datatables.net/sadipaji/132/edit">http://live.datatables.net/sadipaji/132/edit</a>
</p>
</div>
</div>
<div id="outline-container-org72093df" class="outline-2">
<h2 id="org72093df">disable ajax browser caching</h2>
<div class="outline-text-2" id="text-org72093df">
<div class="org-src-container">
<pre class="src src-javascript">//prevents browser caching
$.ajaxSetup({ cache: false });
</pre>
</div>
</div>
</div>

<div id="outline-container-org71150f8" class="outline-2">
<h2 id="org71150f8">query</h2>
<div class="outline-text-2" id="text-org71150f8">
<div class="org-src-container">
<pre class="src src-sql">SELECT s,md5 from huge_data_table limit 10;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql" id="org2f49534">SELECT s,md5 FROM huge_data_table limit 10;
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c6a966" class="outline-2">
<h2 id="org6c6a966">error handler</h2>
<div class="outline-text-2" id="text-org6c6a966">
<div class="org-src-container">
<pre class="src src-php"> &lt;?php
    ini_set('error_reporting', E_ALL | E_STRICT);
    ini_set('display_errors', 'Off');
    ini_set('log_errors', 'On');
    ini_set('error_log', '/usr/local/apache/logs/error_log');
  ?&gt;

// PHP also allows you to handle your own errors with the set_error_handler( ) function: 
    &lt;?php
    set_error_handler('my_error_handler');
    ?&gt;

// This allows you to define your own function (my_error_handler( )) to handle errors; the following is an example implementation: 
    &lt;?php
    function my_error_handler($number, $string, $file, $line, $context)
    {
      $error = "=  ==  ==  ==  ==\nPHP ERROR\n=  ==  ==  ==  ==\n";
      $error .= "Number: [$number]\n";
      $error .= "String: [$string]\n";
      $error .= "File:   [$file]\n";
      $error .= "Line:   [$line]\n";
      $error .= "Context:\n" . print_r($context, TRUE) . "\n\n";
      error_log($error, 3, '/usr/local/apache/logs/error_log');
    }
?&gt;
// This restricts errors to warnings.
&lt;?php
    set_error_handler('my_warning_handler', E_WARNING);
 ?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc25fc4" class="outline-2">
<h2 id="orgdc25fc4">security</h2>
<div class="outline-text-2" id="text-orgdc25fc4">
</div><div id="outline-container-org12a81e5" class="outline-3">
<h3 id="org12a81e5">disable <code>register_globals</code></h3>
</div>
</div>
<div id="outline-container-org5525ed6" class="outline-2">
<h2 id="org5525ed6">bootstrap</h2>
<div class="outline-text-2" id="text-org5525ed6">
</div><div id="outline-container-orgaa31d5e" class="outline-3">
<h3 id="orgaa31d5e">structure of page</h3>
<div class="outline-text-3" id="text-orgaa31d5e">
</div><div id="outline-container-orga7351b8" class="outline-4">
<h4 id="orga7351b8">settings of the viewing arena</h4>
<div class="outline-text-4" id="text-orga7351b8">
<div class="org-src-container">
<pre class="src src-html">&lt;meta name="viewport"
      content="width=device-width, initial-scale=1" /&gt;
</pre>
</div>

<p>
The zoom behavior can be turned off with no user-scalable=no.
</p>
</div>
</div>

<div id="outline-container-orgca458e0" class="outline-4">
<h4 id="orgca458e0">Grid system</h4>
</div>
<div id="outline-container-org2a6be55" class="outline-4">
<h4 id="org2a6be55">Container</h4>
<div class="outline-text-4" id="text-org2a6be55">
<p>
Bootstrap utilizes a container element to initiate the page and find a
basis for the grid.
<b>Containers can be used multiple times on the page, but should not be nested.</b>
</p>


<div class="org-src-container">
<pre class="src src-html">&lt;div class="container"&gt;
     ...
&lt;/div&gt;
</pre>
</div>

<p>
Alternatively, the class .container-fluid can be used, which always
uses the full width of the device:
</p>

<div class="org-src-container">
<pre class="src src-html">1   &lt;div class="container-fluid"&gt;
2     ...
3   &lt;/div&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7d46af9" class="outline-4">
<h4 id="org7d46af9">Device Specific Definitions</h4>
<div class="outline-text-4" id="text-org7d46af9">
<pre class="example">
“xs” &lt;= 544 px
“sm” &lt;= 768 px
“md” &lt;= 992 px
“lg” &lt;= 1200 px
“xl” &gt; 1200 px
1   @media (min-width: @screen-sm-min) { ... }
2
3   @media (min-width: @screen-md-min) { ... }
4
5   @media (min-width: @screen-lg-min) { ... }
</pre>
</div>
</div>

<div id="outline-container-org21571d1" class="outline-4">
<h4 id="org21571d1">Order Column</h4>
<div class="outline-text-4" id="text-org21571d1">
<p>
If individual columns have class styles such as .push-md- or pull-md-, they can be used,
even if different from their natural order. “Push” means pushing columns to the right,
while they are pulled to the left with “pull”.
</p>

<div class="org-src-container">
<pre class="src src-html">1   &lt;div class="row"&gt;
2     &lt;div class="col-md-9 push-md-3"&gt;9 + 3 right&lt;/div&gt;
3     &lt;div class="col-md-3 pull-md-9"&gt;3 + 9 left&lt;/div&gt;
4   &lt;/div&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcc1205d" class="outline-3">
<h3 id="orgcc1205d">typography</h3>
<div class="outline-text-3" id="text-orgcc1205d">
</div><div id="outline-container-org7a19910" class="outline-4">
<h4 id="org7a19910">Orientation</h4>
<div class="outline-text-4" id="text-org7a19910">
<p>
The alignment of text is up to your creative nature.
</p>

<ul class="org-ul">
<li>text-left: Left aligned</li>
<li>text-center: Text is centered</li>
<li>text-right: Right aligned</li>
<li>text-justify: Justified</li>
<li>text-nowrap: Obstruction of upheaval</li>
</ul>

<p>
In addition, there are alignment variants that are only valid for certain viewports.
</p>

<ul class="org-ul">
<li>text-xs-left: Left aligned when the viewport “xs” is used.</li>
<li>text-xs-center: Text is centered when the viewport “xs” is used.</li>
<li>text-xs-right: Right aligned when the viewport “xs” is used.</li>
</ul>
</div>
</div>

<div id="outline-container-org2c45b7d" class="outline-4">
<h4 id="org2c45b7d">transformation</h4>
<div class="outline-text-4" id="text-org2c45b7d">
<p>
Transformations convert text from lowercase to uppercase and vice versa.
</p>

<ul class="org-ul">
<li>text-lowercase: Converts to lowercase</li>
<li>text-uppercase: Converts to uppercase</li>
<li>text-capitalize: First letter of each word is capitalized.</li>
<li>text-weight-bold: Bold without an explicit tag.</li>
<li>text-weight-normal: Normal weight without an explicit tag</li>
<li>text-italics: Italics without an explicit tag</li>
</ul>
</div>
</div>

<div id="outline-container-org4ac1d3b" class="outline-4">
<h4 id="org4ac1d3b">lists</h4>
<div class="outline-text-4" id="text-org4ac1d3b">
</div><div id="outline-container-org2f56103" class="outline-5">
<h5 id="org2f56103"><code>.list-unstyled</code></h5>
<div class="outline-text-5" id="text-org2f56103">
<p>
If the default style used and there are icons not needed, they can be removed by the
class <code>.list-unstyled</code>.
This will affect only the immediate members not the deeper nesting
levels.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd730f66" class="outline-3">
<h3 id="orgd730f66">form</h3>
</div>
<div id="outline-container-orgc5fdc0b" class="outline-3">
<h3 id="orgc5fdc0b">show/hide bootstrap modals</h3>
<div class="outline-text-3" id="text-orgc5fdc0b">
<p>
Bootstrap has a few functions that can be called manually on modals:
</p>

<div class="org-src-container">
<pre class="src src-javascript">$('#myModal').modal('toggle');
$('#myModal').modal('show');
$('#myModal').modal('hide');
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdce577c" class="outline-2">
<h2 id="orgdce577c">HTML</h2>
<div class="outline-text-2" id="text-orgdce577c">
</div><div id="outline-container-org5bb9127" class="outline-3">
<h3 id="org5bb9127">How do you disable browser Autocomplete on web form field / input tag?</h3>
<div class="outline-text-3" id="text-org5bb9127">
<p>
autocomplete prevents form data from being cached in older browsers.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;input type="text" name="foo" autocomplete="off" /&gt;
</pre>
</div>
</div>
</div>


<div id="outline-container-orgebe013a" class="outline-3">
<h3 id="orgebe013a">How to use the “required” attribute with a “radio” input field</h3>
<div class="outline-text-3" id="text-orgebe013a">
<p>
You just need to set the required-attribute for one input of the radiogroup, but you can set it for all.
</p>

<p>
For example:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;form&gt;
  &lt;label for="input1"&gt;1:&lt;/label&gt;
  &lt;input type="radio" name="myradiogroup1" id="input1" value="1" required&gt;&lt;br&gt;

  &lt;label for="input2"&gt;2:&lt;/label&gt;
  &lt;input type="radio" name="myradiogroup1" id="input2" value="2"&gt;&lt;br&gt;

  &lt;label for="input3"&gt;3:&lt;/label&gt;
  &lt;input type="radio" name="myradiogroup1" id="input3" value="3"&gt;&lt;br&gt;

  &lt;input type="submit" value="send"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org78c9ddf" class="outline-3">
<h3 id="org78c9ddf">HTML5 form required attribute. Set custom validation message?</h3>
<div class="outline-text-3" id="text-org78c9ddf">
<p>
<a href="http://jsfiddle.net/nteb4/23/">http://jsfiddle.net/nteb4/23/</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Mohammad Reza Mansouri</p>
<p class="date">Created: 2017-03-05 Sun 23:56</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
